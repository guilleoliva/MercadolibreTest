define("external/deep-freeze",["require","exports","module"],function(e,r,t){t.exports=function e(r){return Object.freeze(r),Object.getOwnPropertyNames(r).forEach(function(t){!r.hasOwnProperty(t)||null===r[t]||"object"!=typeof r[t]&&"function"!=typeof r[t]||Object.isFrozen(r[t])||e(r[t])}),r}}.bind(Object.create(null))),define("modules/clean/browse_uri_interface",["require","exports","modules/clean/viewer","modules/core/uri"],function(e,r,t,n){"use strict";function s(e){return t.Viewer.get_viewer().is_paired?"personal"===e.role?_+r.PERSONAL_ROOT:_+r.WORK_ROOT:_+r.HOME_ROOT}function o(e){_=e}function a(e,r){return"/"!==r.charAt(0)&&(r="/"+r),new n.URI({scheme:"https",authority:"www.dropbox.com",path:_+"/preview"+r,query:{role:e.role}})}function i(e,r){return r.is_dir?r.href:r.is_cloud_doc&&r.preview_url?r.preview_url:a(e,r.fq_path).toString()}function c(e,r){return new n.URI({scheme:"https",authority:"www.dropbox.com",path:""+s(e)+r})}Object.defineProperty(r,"__esModule",{value:!0}),r.HOME_ROOT="/home",r.WORK_ROOT="/work",r.PERSONAL_ROOT="/personal";var _="";r.get_browse_root=s,r.set_base_prefix=o,r.preview_uri_for_fq_path=a,r.href_for_file=i,r.browse_uri_for_fq_path=c}),define("modules/clean/filetypes",["require","exports"],function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(function(e){e[e.FILE=1]="FILE",e[e.FOLDER=2]="FOLDER",e[e.PACKAGE=3]="PACKAGE",e[e.SHARED_FOLDER=4]="SHARED_FOLDER",e[e.SANDBOX=5]="SANDBOX",e[e.TEAM_SHARED_FOLDER=6]="TEAM_SHARED_FOLDER",e[e.TEAM_MEMBER_FOLDER=7]="TEAM_MEMBER_FOLDER"})(r.FileTypes||(r.FileTypes={}))}),define("modules/clean/immutability_helper",["require","exports","external/deep-freeze"],function(e,r,t){"use strict";function n(e){if(null==e)throw new TypeError("Cannot thaw null/undefined object");if(Array.isArray(e))return E.call(e);for(var r=Object.create(Object.getPrototypeOf(e)),t=Object.getOwnPropertyNames(e),n=0,s=t;n<s.length;n++){var o=s[n],a=Object.getOwnPropertyDescriptor(e,o);a&&(a.get||a.set)?(a.configurable=!0,Object.defineProperty(r,o,a)):r[o]=e[o]}return r}function s(e,r){var s=n(e);return r(s),t(s)}function o(e,r){if(!r||0===r.length)throw new TypeError("Invalid key path: "+JSON.stringify(r));return r.reduce(function(e,r){return null==e?null:e[r]},e)}function a(e,r,s){if(null==e)throw new TypeError("Object to `set` cannot be null");if(e[r]===s)return e;var o=n(e);return o[r]=s,t(o)}function i(e,r,t){return a(e,r,t(e[r]))}function c(e,r,t){if(!r||0===r.length)throw new TypeError("Invalid key path: "+JSON.stringify(r));if(null==e)throw new TypeError("Target object cannot be null");var n=r[0];return 1===r.length?i(e,n,t):a(e,n,c(e[n],r.slice(1),t))}function _(e,r,t){if(!r||0===r.length)throw new TypeError("Invalid key path: "+JSON.stringify(r));if(null==e)throw new TypeError("Target object cannot be null");var n=r[0];switch(r.length){case 1:return a(e,n,t);default:return a(e,n,_(e[n]||{},r.slice(1),t))}}function l(e,r){if(null==e||null==r)throw new TypeError("Both target and source cannot be null");var s=Object.keys(r).reduce(function(t,n){return r[n]!==e[n]&&t.push(n),t},[]);if(s.length){for(var o=n(e),a=0,i=s;a<i.length;a++){var c=i[a],_=Object.getOwnPropertyDescriptor(r,c);void 0!==_&&Object.defineProperty(o,c,_)}return t(o)}return e}function u(e,r,t){if(null==e||null==t)throw new TypeError("Both target and source cannot be null");return c(e,r,function(e){return l(e,t)})}function h(e,r,n){for(var s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];var a=E.call(e);return a.splice.apply(a,[r,n].concat(s)),t(a)}function d(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var s=E.call(e);return s.unshift.apply(s,r),t(s)}function p(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var s=E.call(e);return s.push.apply(s,r),t(s)}Object.defineProperty(r,"__esModule",{value:!0});var E=Array.prototype.slice;r.thaw=n,r.withMutations=s,r.getIn=o,r.set=a,r.update=i,r.updateIn=c,r.setIn=_,r.merge=l,r.mergeIn=u,r.splice=h,r.unshift=d,r.push=p}),define("modules/clean/react/app_actions_view",["require","exports","tslib","external/classnames","external/spectrum/button","external/spectrum/icon_action","external/spectrum/popover","external/spectrum/overflow_button","external/spectrum/tertiary_link","external/react","modules/clean/react/css","modules/clean/user_education/user_education_client","modules/clean/react/file_uploader/upload_button"],function(e,r,t,n,s,o,a,i,c,_,l,u,h){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AppActionsPopover=function(e){var r=e.primaryMenuItem,t=e.secondaryMenuItems,n=e.popoverTriggerLabel,s=[];r&&(s=s.concat([r])),t&&(s=s.concat.apply(s,t));var c=function(e){e.handleClick&&e.handleClick()};return s.length&&n?_.createElement(a.Popover,{onSelection:c},_.createElement(a.PopoverTrigger,null,_.createElement(i.OverflowButton,{tagName:"span","aria-label":n})),_.createElement(a.PopoverContent,{attachment:"right"},s.map(function(e){var r=e.className&&e.className.indexOf("action-upload")>=0;return _.createElement(a.PopoverContentItem,{key:e.displayName,value:e,className:e.className,disabled:e.disabled},r&&_.createElement(h.UploadButton,{variant:"popover"}),e.iconName&&_.createElement(o.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.displayName)}))):_.createElement("noscript",null)};var d=function(e,r,t){u.UEClient.sendEvent(e,r),t&&t()},p=function(e){var r=e.primaryMenuItem,t=e.headerText;if(r&&Object.keys(r).length>0){var o=n("primary-action-menu__button",r.className),a=o.indexOf("action-upload")>=0,i=_.createElement(u.UserEducationEffect,{containerName:"AppActionsView",name:"PrimaryButtonText",useSpan:!0},r.displayName);return _.createElement("div",{className:"primary-action-menu"},_.createElement("span",{className:"primary-action-menu__header-text"},t),_.createElement("div",{className:"primary-action-menu__button-wrapper"},a?_.createElement(h.UploadButton,{className:o,disabled:r.disabled,handleClick:function(){d("AppActionsView","PrimaryButtonTextClicked",r.handleClick)},variant:"primary"},i):_.createElement(s.Button,{className:o,disabled:r.disabled,onClick:r.handleClick,variant:"primary"},i)))}return _.createElement("noscript",null)},E=function(e){var r=e.menuItem,t=r.disabled,s=r.displayName,o=r.handleClick,a=r.iconName,i=n("secondary-action-menu__button",e.menuItem.className),l=i.indexOf("action-upload")>=0,p=_.createElement(u.UserEducationEffect,{containerName:"AppActionsView",name:"SecondaryActionMenu-text-"+a},s);return l?_.createElement(h.UploadButton,{key:s,iconName:a,handleClick:function(){d("AppActionsView","SecondaryActionMenu-text-"+a+"-Clicked",o)},disabled:t,className:i,variant:"secondary"},p):_.createElement(c.TertiaryLink,{key:s,icon:a,onClick:function(){d("AppActionsView","SecondaryActionMenu-text-"+a+"-Clicked",o)},disabled:t,className:i},p)},S=function(e){var r=e.secondaryMenuItems;return _.createElement(c.TertiaryList,{className:"secondary-action-menu"},r.map(function(e){return _.createElement(E,{key:e.displayName,menuItem:e})}))},m=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.props.handleComponentTTI("AppActionsView")},n.prototype.render=function(){var e=this.props,t=e.responsive,n=e.primaryMenuItem,s=e.primarySubnode,o=e.secondaryMenuItems,a=e.headerText,i=e.popoverTriggerLabel,c=!(!t||!t.isResponsive||t.isMatchedLarge);return _.createElement("div",{className:"appactions-menu"},c&&_.createElement("div",{className:"appactions-menu--popover"},n&&i&&_.createElement(r.AppActionsPopover,{primaryMenuItem:n,secondaryMenuItems:o,popoverTriggerLabel:i})),!c&&_.createElement("div",{className:"appactions-menu--buttons"},n&&_.createElement(p,{primaryMenuItem:n,headerText:a}),s,o&&_.createElement(S,{secondaryMenuItems:o})))},n.defaultProps={headerText:"",secondaryMenuItems:[],handleComponentTTI:function(){}},n})(_.PureComponent),f=l(m,["/static/css/spectrum/index.web-vfl-3Y3ef.css","/static/css/dropbox/app_actions-vflzsu3z_.css"]);r.AppActionsView=f}),define("modules/clean/react/browse/constants",["require","exports","modules/core/i18n"],function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(function(e){e[e.NotReady=0]="NotReady",e[e.NotLive=1]="NotLive",e[e.Live=2]="Live"})(r.BrowseBoltClientStatus||(r.BrowseBoltClientStatus={}));(function(e){e.INITIALIZE_EVERYTHING="INITIALIZE_EVERYTHING",e.LOAD_PATH="LOAD_PATH",e.CLEAR_FILES="CLEAR_FILES",e.ADD_FILES="ADD_FILES",e.ADD_FILES_AND_SET_LOADING_STATE="ADD_FILES_AND_SET_LOADING_STATE",e.SET_PATH="SET_PATH",e.SET_USER="SET_USER",e.SET_URL_PREFIX="SET_URL_PREFIX",e.SET_LOADING_STATE="SET_LOADING_STATE",e.SET_MOUNT_POINTS="SET_MOUNT_POINTS",e.SET_TEAM_FOLDERS="SET_TEAM_FOLDERS",e.CHANGE_FILES="CHANGE_FILES",e.SET_SELECTION="SET_SELECTION",e.SELECT_FILES_AFTER_UPLOAD="SELECT_FILES_AFTER_UPLOAD",e.SELECT_FILES_BY_FQ_PATH="SELECT_FILES_BY_FQ_PATH",e.SET_SHOULD_SHOW_DELETED_FILES="SET_SHOULD_SHOW_DELETED_FILES",e.SET_DROP_TARGET="SET_DROP_TARGET",e.SORT_FILES="SORT_FILES",e.SET_VIEW_TYPE="SET_VIEW_TYPE",e.SET_COPY_MODE="SET_COPY_MODE",e.COPY_FILES_TO_CLIPBOARD="COPY_FILES_TO_CLIPBOARD",e.REQUEST_NEW_FILE_NAME="REQUEST_NEW_FILE_NAME",e.CANCEL_FILE_RENAME="CANCEL_FILE_RENAME",e.SET_FILE_RENAME_PENDING="SET_FILE_RENAME_PENDING",e.SET_FILE_RENAME_COMPLETE="SET_FILE_RENAME_COMPLETE",e.REQUEST_FOLDER_NAME="REQUEST_FOLDER_NAME",e.CREATE_FOLDER_PENDING="CREATE_FOLDER_PENDING",e.CREATE_FOLDER_COMPLETE="CREATE_FOLDER_COMPLETE",e.CANCEL_CREATE_FOLDER="CANCEL_CREATE_FOLDER",e.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE="SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE",e.TEAM_FOLDER_DOWNGRADE="TEAM_FOLDER_DOWNGRADE",e.ADD_COMMENT_STATUS_BATCH="ADD_COMMENT_STATUS_BATCH",e.ADD_FILE_JUMP_KEY_CODE="ADD_FILE_JUMP_KEY_CODE",e.RESET_FILE_JUMP="RESET_FILE_JUMP",e.SET_ACTIVE_TAB="SET_ACTIVE_TAB",e.REQUEST_FETCH_FOLDER_SIZES="REQUEST_FETCH_FOLDER_SIZES",e.FETCHED_FOLDER_SIZES="FETCHED_FOLDER_SIZES",e.COMPLETE_FETCH_FOLDER_SIZES="COMPLETE_FETCH_FOLDER_SIZES",e.SET_COLUMN_DEPENDENT_CAPABILITIES="SET_COLUMN_DEPENDENT_CAPABILITIES",e.SET_TILES_PER_ROW="SET_TILES_PER_ROW",e.SET_COLUMN_CONFIGURATION="SET_COLUMN_CONFIGURATION"})(r.BrowseActionType||(r.BrowseActionType={}));(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(r.NewFolderCreationState||(r.NewFolderCreationState={}));(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES"})(r.LoadingState||(r.LoadingState={}));(function(e){e.UP="UP",e.DOWN="DOWN"})(r.Direction||(r.Direction={})),r.BROWSE_FILE_VIEWER_ELEMENT_ID="browse-react-file-viewer-container";(function(e){e.FILENAME="FILENAME",e.MODIFIED="MODIFIED",e.CATEGORY="CATEGORY",e.EXTENSION="EXTENSION",e.SIZE="SIZE",e.SHARED_WITH="SHARED_WITH",e.SYNC_SETTING="SYNC_SETTING"})(r.BrowseSortField||(r.BrowseSortField={}));(function(e){e.FILENAME="FILES_BY_NAME",e.MODIFIED="FILES_BY_MODIFIED",e.CATEGORY="FILES_BY_CATEGORY",e.EXTENSION="FILES_BY_NAME",e.SIZE="FILES_BY_SIZE",e.SHARED_WITH="FILES_BY_NAME",e.SYNC_SETTING="FILES_BY_SYNC_SETTING"})(r.BrowseSortLabel||(r.BrowseSortLabel={}));(function(e){e[e.FILENAME=0]="FILENAME",e[e.CATEGORY=1]="CATEGORY",e[e.EXTENSION=2]="EXTENSION",e[e.SHARED_WITH=3]="SHARED_WITH",e[e.SYNC_SETTING=4]="SYNC_SETTING"})(r.BrowseSortIsFilename||(r.BrowseSortIsFilename={}));(function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"})(r.SortDirection||(r.SortDirection={}));(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSELECTED_FOLDERS="NONSELECTED_FOLDERS",e.NONSELECTED_NONSHARED_FOLDERS="NONSELECTED_NONSHARED_FOLDERS",e.NONSELECTED_NONSHARED_NONTEAM_FOLDERS="NONSELECTED_NONSHARED_NONTEAM_FOLDERS"})(r.DropTargetHighlightMode||(r.DropTargetHighlightMode={}));var n={IMAGE:["bmp","cr2","gif","ico","jpeg","jpg","nef","png","psd","tif","tiff","svg","svgz"],VIDEO:["3gp","3gpp","3gpp2","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","ts","vob","wmv"],AUDIO:["aif","flac","m4a","m4p","mp3","ogg","wav","wma"],DOCUMENT:["ai","cdr","csv","doc","docx","docm","eps","fla","indd","keynote","numbers","otf","pages","pdf","ppt","pptx","pptm","pps","ppsx","ppsm","ps","rtf","swf","txt","wpd","xls","xlsx","xlsm"],COMPRESSED_FILE:["7z","bz2","gz","gzip","rar","tar","zip"],CODE:["as","as3","asm","aspx","bat","c","cc","cmake","coffee","cpp","cs","css","cxx","diff","erb","erl","groovy","gry","h","haml","hh","hpp","html","htm","hxx","java","js","json","jsx","less","lst","m","make","mk","ml","mm","msg","out","patch","php","pl","pm","plist","properties","py","rb","sass","scala","scm","script","scss","sh","sml","sql","vb","vi","vim","xhtml","xml","xsd","xsl","y","yaml","yml","yxx"],DISK_IMAGE:["dmg","iso"],EXECUTABLE:["exe"],SHORTCUT:["lnk"],LINK:["url","webloc"],FONT:["ttf"]};r.BrowseTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},r.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5};(function(e){e.CREATE_FOLDER_UI="CreateFolderUI",e.LOADING_INDICATOR="LoadingIndicator"})(r.ItemType||(r.ItemType={})),r.FileTypeCategoryTranslations={FILE:t._("File"),FOLDER:t._("Folder"),SHARED_FOLDER:t._("Shared folder"),TEAM_SHARED_FOLDER:t._("Team folder"),TEAM_MEMBER_FOLDER:t._("Member folder"),PUBLIC_FOLDER:t._("Folder"),IMAGE:t._("Image"),VIDEO:t._("Video"),AUDIO:t._("Audio"),DOCUMENT:t._("Document"),COMPRESSED_FILE:t._("Archive"),CODE:t._("Code"),DISK_IMAGE:t._("Disk image"),EXECUTABLE:t._("Executable"),SHORTCUT:t._("Shortcut"),LINK:t._("Link"),FONT:t._("Font"),SANDBOX:t._("App folder")},r.FileTypeCapitalizedCategoryTranslations={FILE:t._("FILE"),FOLDER:t._("FOLDER"),SHARED_FOLDER:t._("SHARED FOLDER"),TEAM_SHARED_FOLDER:t._("TEAM FOLDER"),TEAM_MEMBER_FOLDER:t._("MEMBER FOLDER"),PUBLIC_FOLDER:t._("FOLDER"),IMAGE:t._("IMAGE"),VIDEO:t._("VIDEO"),AUDIO:t._("AUDIO"),DOCUMENT:t._("DOCUMENT"),COMPRESSED_FILE:t._("ARCHIVE"),CODE:t._("CODE"),DISK_IMAGE:t._("DISK IMAGE"),EXECUTABLE:t._("EXECUTABLE"),SHORTCUT:t._("SHORTCUT"),LINK:t._("LINK"),FONT:t._("FONT"),SANDBOX:t._("APP FOLDER")},r.DeletedFileTypeCategoryTranslations={FILE:t._("Deleted file"),FOLDER:t._("Deleted folder"),SHARED_FOLDER:t._("Deleted shared folder"),TEAM_SHARED_FOLDER:t._("Deleted team folder"),TEAM_MEMBER_FOLDER:t._("Deleted member folder"),PUBLIC_FOLDER:t._("Deleted folder"),IMAGE:t._("Deleted image"),VIDEO:t._("Deleted video"),AUDIO:t._("Deleted audio"),DOCUMENT:t._("Deleted document"),COMPRESSED_FILE:t._("Deleted archive"),CODE:t._("Deleted code"),DISK_IMAGE:t._("Deleted disk image"),EXECUTABLE:t._("Deleted executable"),SHORTCUT:t._("Deleted shortcut"),LINK:t._("Deleted link"),FONT:t._("Deleted font"),SANDBOX:t._("Deleted app folder")},r.DeletedFileTypeCapitalizedCategoryTranslations={FILE:t._("DELETED FILE"),FOLDER:t._("DELETED FOLDER"),SHARED_FOLDER:t._("DELETED SHARED FOLDER"),TEAM_SHARED_FOLDER:t._("DELETED TEAM FOLDER"),TEAM_MEMBER_FOLDER:t._("DELETED MEMBER FOLDER"),PUBLIC_FOLDER:t._("DELETED FOLDER"),IMAGE:t._("DELETED IMAGE"),VIDEO:t._("DELETED VIDEO"),AUDIO:t._("DELETED AUDIO"),DOCUMENT:t._("DELETED DOCUMENT"),COMPRESSED_FILE:t._("DELETED ARCHIVE"),CODE:t._("DELETED CODE"),DISK_IMAGE:t._("DELETED DISK IMAGE"),EXECUTABLE:t._("DELETED EXECUTABLE"),SHORTCUT:t._("DELETED SHORTCUT"),LINK:t._("DELETED LINK"),FONT:t._("DELETED FONT"),SANDBOX:t._("DELETED APP FOLDER")},r.SyncSettingTranslations={sync:t._("Starts as synced"),nosync:t._("Starts as unsynced"),nosync_inherited:t._("Starts as unsynced"),sync_partial:t._("Some start synced"),deleted:""},r.ExtensionCategories={};for(var s=0,o=Object.keys(n);s<o.length;s++)for(var a=o[s],i=n[a],c=0,_=i;c<_.length;c++){var l=_[c];r.ExtensionCategories[l]=a}(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(r.RenameState||(r.RenameState={}));(function(e){e[e.NONE=-1]="NONE",e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"})(r.MouseEventButton||(r.MouseEventButton={}));(function(e){e[e.ShareExisting=1]="ShareExisting",e[e.EditShared=2]="EditShared",e[e.EditSharedSubFolder=3]="EditSharedSubFolder"})(r.ShareFolderModalType||(r.ShareFolderModalType={}));(function(e){e.SET_SHARED_FOLDER_DATA="SET_SHARED_FOLDER_DATA",e.SET_MEMBER_COUNTS_FOR_NS="SET_MEMBER_COUNTS_FOR_NS",e.SET_SHARED_LINK_DATA="SET_SHARED_LINK_DATA",e.SET_SHARED_FILE_DATA="SET_SHARED_FILE_DATA",e.SIGNAL_SHARED_FILE_DATA_OUT_OF_DATE="SIGNAL_SHARED_FILE_DATA_OUT_OF_DATE",e.SIGNAL_SHARED_FOLDER_DATA_OUT_OF_DATE="SIGNAL_SHARED_FOLDER_DATA_OUT_OF_DATE",e.SIGNAL_SHARED_LINK_DATA_OUT_OF_DATE="SIGNAL_SHARED_LINK_DATA_OUT_OF_DATE",e.CLEAR_SHARED_FOLDER_DATA_FOR_NS="CLEAR_SHARED_FOLDER_DATA_FOR_NS",e.REMOVE_SHARED_LINK_DATA="REMOVE_SHARED_LINK_DATA"})(r.SharedWithActionType||(r.SharedWithActionType={})),r.SEARCH_PREFIX="/search";var u;(function(e){e.Grid="GRID_VIEW",e.List="LIST_VIEW"})(u=r.ViewType||(r.ViewType={})),r.AllViewTypes=[u.Grid,u.List];(function(e){e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.NO_ACCESS="NO_ACCESS",e.ERROR="ERROR"})(r.FetchFolderSizeState||(r.FetchFolderSizeState={})),r.MAX_FOLDERS_PER_CALL=100,r.MAX_FOLDER_SIZE_QUEUE_SIZE=50,r.MAX_FOLDER_SIZE_ITERATIONS=1e3;(function(e){e.GOOGLE_DOC="gdoc",e.GOOGLE_SHEET="gsheet",e.GOOGLE_SLIDE="gslide",e.PAPER="paper"})(r.CloudDoc||(r.CloudDoc={})),r.VIEW_TYPE_COOKIE_NAME="browse_view_type",r.COLUMNS_STORAGE_KEY="browse_columns",r.BROWSE_SORT_COOKIE_NAME="browse_current_sort"}),define("modules/clean/react/browse/logger_util",["require","exports"],function(e,r){"use strict";function t(e){return e&&!!e.fq_path}function n(e){return e&&!!e.pad_id}function s(e){return void 0!==e.folder_id}Object.defineProperty(r,"__esModule",{value:!0}),r.isFile=t,r.isPaper=n,r.isPaperFolder=s}),define("modules/clean/react/browse/models",["require","exports","tslib","modules/clean/immutability_helper","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/constants","modules/clean/sharing/access_level","modules/clean/display_format","modules/clean/datetime","modules/core/i18n"],function(e,r,t,n,s,o,a,i,c,_,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=(function(){function e(e){this.beacon_context=e.beacon_context,this.bytes=e.bytes,this.comment_count=e.comment_count,this.direct_blockserver_link=e.direct_blockserver_link,this.event_type=e.event_type,this.ext=e.ext,this.feedback_off=e.feedback_off,this.file_id=e.file_id,this.filename_highlights=e.filename_highlights,this.fq_path=e.fq_path,this.href=e.href,this.htmlified_link=e.htmlified_link,this.icon=e.icon,this.is_camera_uploads=e.is_camera_uploads,this.is_cloud_doc=e.is_cloud_doc,this.is_dir=e.is_dir,this.is_in_team_folder_tree=e.is_in_team_folder_tree,this.is_unmounted=e.is_unmounted,this.last_modified_name=e.last_modified_name,this.latest_rev=e.latest_rev,this.linkfile_data=e.linkfile_data,this.match_type=e.match_type,this._mount_access_perms=e._mount_access_perms,this.ns_id=e.ns_id,this.ns_path=e.ns_path,this.preview_type=e.preview_type,this.preview_url=e.preview_url,this.preview_thumbnail_url=e.preview_thumbnail_url,this.read_only=!!e.read_only,this.request_id=e.request_id,this.revision_id=e.revision_id,this.sjid=e.sjid,this.sort_key=e.sort_key,this.sort_rank=e.sort_rank,this.sync_setting=e.sync_setting,this.target_ns=e.target_ns,this.team_folder_status=e.team_folder_status,this.thumbnail_url_tmpl=e.thumbnail_url_tmpl,this.ts=e.ts,this.type=e.type,this.unresolved_comment_count=e.unresolved_comment_count,this.video_metadata_url=e.video_metadata_url,this.video_container=e.video_container,this.video_transcode_url=e.video_transcode_url,this.preview_ssr_text_url_tmpl=e.preview_ssr_text_url_tmpl,this.preview_ssr_image_url_tmpl=e.preview_ssr_image_url_tmpl,this.preview_ssr_refresh_url=e.preview_ssr_refresh_url,this.isDeleted=!!e.isDeleted,this.fetchFolderSizesStatus=e.fetchFolderSizesStatus}return Object.defineProperty(e.prototype,"ago",{get:function(){return this.is_dir||null===this.ts||void 0===this.ts?"":_.getActingTimeWithAgoEnabled(1e3*this.ts,!1,!1,0,!0,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.isDeleted||this.bytes<0?l._("deleted"):void 0===this.bytes?"":c.format_bytes(this.bytes)},enumerable:!0,configurable:!0}),e.fromServerObject=function(r){return new e(t.__assign({},r,{_mount_access_perms:r.mount_access_perms,isDeleted:r.bytes===-1}))},e.prototype.set=function(e,r){return n.set(this,e,r)},e.prototype.merge=function(e){return n.merge(this,e)},e.prototype.toJS=function(){return Object.assign({},this)},e.getExtension=function(e){return e.is_dir?"":s.file_extension(s.filename(e.fq_path))},e.getCategoryDescription=function(r,t){void 0===t&&(t=!1);var n;if(r.is_dir)switch(n="FOLDER",r.type){case o.FileTypes.TEAM_SHARED_FOLDER:n="TEAM_SHARED_FOLDER";break;case o.FileTypes.SHARED_FOLDER:n="SHARED_FOLDER";break;case o.FileTypes.SANDBOX:n="SANDBOX";break;case o.FileTypes.TEAM_MEMBER_FOLDER:n="TEAM_MEMBER_FOLDER";break;default:r.target_ns&&(n="SHARED_FOLDER")}else n=a.ExtensionCategories[e.getExtension(r)]||"FILE";return r.isDeleted?t?a.DeletedFileTypeCapitalizedCategoryTranslations[n]:a.DeletedFileTypeCategoryTranslations[n]:t?a.FileTypeCapitalizedCategoryTranslations[n]:a.FileTypeCategoryTranslations[n]},e.isTeamSharedFolder=function(e){return e.type===o.FileTypes.TEAM_SHARED_FOLDER},e.isTeamMemberFolder=function(e){return e.type===o.FileTypes.TEAM_MEMBER_FOLDER},e.isReadOnlySharedFolder=function(e){var r=e._mount_access_perms;return null!=r&&!r.includes("can_edit")},e.isNoAccessSharedFolder=function(e){var r=e._mount_access_perms;return null!=r&&!r.includes("can_view")},e.canViewFileMembers=function(e,r){var t=e._mount_access_perms;return!(t&&t.indexOf("can_view_members")<0)&&(!(r&&!r.canViewContainingNSMembers)||!!(t&&t.indexOf("can_view_members")>=0))},e.areEqual=function(e,r){return e.ns_id===r.ns_id&&e.sjid===r.sjid},e.revisionKey=function(e){return e.ns_id+":"+e.sjid},e.prototype.updateSize=function(e,r){return this.merge({bytes:e,fetchFolderSizesStatus:r})},e})();r.File=u;var h=(function(){function e(e){void 0===e&&(e={}),this.isPublicFolderEnabled=!!e.isPublicFolderEnabled,this.publicFolderFqPath=e.publicFolderFqPath,this.publicAppToken=e.publicAppToken,Object.freeze(this)}return e.fromServerObject=function(r){return new e({isPublicFolderEnabled:r.public_folder_enabled,publicFolderFqPath:r.public_folder_fq_path,publicAppToken:r.public_app_token})},e.prototype.set=function(e,r){return n.set(this,e,r)},e.prototype.toJSON=function(){return Object.assign({},this)},e.prototype.toJS=function(){return this.toJSON()},e})();r.Config=h;var d=(function(){function e(e){var r=void 0===e?{}:e,t=r.canViewContainingNSMembers,n=r.currentNSID,s=r.currentFQPath,o=r.currentMountPoint,a=r.currentNSPath,c=r.currentSharedFolderPermissionRole,_=r.currentNSAllowsNesting,l=r.inactiveNSIDByFQPath,u=r.permanentDeletionDisabledStateByNSID,d=r.isInFolderMode,p=r.isCurrentlyInRoot,E=r.isInsideSharedFolder,S=r.isInsideTeamFolderRoot,m=r.isInsideArchivedTeamFolder,f=r.isInsideTeamFolderTree,T=r.isInsideDeletedFolder,R=r.isInsideDeletedSharedFolder,A=r.isInsideDeletedNestedSharedFolder,C=r.isNonUserRelativeContext,O=r.pathRoot,I=r.rootNSID,g=r.showSharedFolderCreateTeamPromo,y=r.showPinnedTeamFolder,D=r.teamFolderOwnerTeamApiId,v=r.blockHash,L=r.config,N=r.syncSetting;this.canViewContainingNSMembers=null==t||t,this.currentNSID=n,this.currentFQPath=s||"",this.currentMountPoint=o,this.currentNSPath=a,this.currentSharedFolderPermissionRole=null!=c?c:i.NameSpaceAccess.ACCESS_NO_ACCESS,this.currentNSAllowsNesting=!!_,this.inactiveNSIDByFQPath=l||{},this.permanentDeletionDisabledStateByNSID=u||{},this.isInFolderMode=null==d||d,this.isCurrentlyInRoot=!!p,this.isInsideSharedFolder=!!E,this.isInsideTeamFolderRoot=!!S,this.isInsideArchivedTeamFolder=!!m,this.isInsideTeamFolderTree=!!f,this.isInsideDeletedFolder=!!T,this.isInsideDeletedSharedFolder=!!R,this.isInsideDeletedNestedSharedFolder=!!A,this.isNonUserRelativeContext=!!C,this.pathRoot=O,this.rootNSID=I,this.showSharedFolderCreateTeamPromo=!!g,this.showPinnedTeamFolder=!!y,this.teamFolderOwnerTeamApiId=D,this.blockHash=v,this.config=L||new h,this.syncSetting=N}return e.fromServerObject=function(r){var t=r.containing_fq_path||"";t.startsWith("/")||(t="/"+t);var n;r.inside_shared_folder&&(n=i.NameSpaceAccess.ACCESS_READER);var s,o=r.containing_ns_permissions||[],a=o.includes("mount_shared_folders");return r.inside_shared_folder&&(o.includes("edit_contents")&&(n=i.NameSpaceAccess.ACCESS_WRITER),o.includes("change_folder_options")&&(n=i.NameSpaceAccess.ACCESS_OWNER),o.includes("view_members")||(s=!1)),new e({blockHash:r.block_hash,canViewContainingNSMembers:s,config:h.fromServerObject(r),currentFQPath:t,currentMountPoint:r.containing_mount_point,currentNSAllowsNesting:a,currentNSID:r.containing_ns_id,currentNSPath:r.containing_ns_path,currentSharedFolderPermissionRole:n,inactiveNSIDByFQPath:r.old_path_to_ns_id,isCurrentlyInRoot:r.in_root_dir,isInFolderMode:r.inside_dir,isInsideArchivedTeamFolder:r.inside_archived_team_folder,isInsideTeamFolderRoot:r.inside_team_folder_root,isInsideDeletedFolder:r.inside_deleted_dir,isInsideDeletedNestedSharedFolder:r.inside_deleted_nested_shared_folder,isInsideDeletedSharedFolder:r.inside_deleted_shared_folder,isInsideSharedFolder:r.inside_shared_folder,isInsideTeamFolderTree:r.inside_team_folder_tree,isNonUserRelativeContext:r.is_non_user_relative_context,pathRoot:r.path_root,permanentDeletionDisabledStateByNSID:r.permanent_delete_is_disabled_by_ns_id,rootNSID:r.root_ns_id,showPinnedTeamFolder:r.show_pinned_team_folder,showSharedFolderCreateTeamPromo:r.show_shared_folder_create_team_promo,teamFolderOwnerTeamApiId:r.team_folder_owner_team_dbtid,syncSetting:r.sync_setting})},e.prototype.set=function(e,r){return n.set(this,e,r)},e.prototype.toJSON=function(){return Object.assign({},this)},e.prototype.toJS=function(){return this.toJSON()},e.prototype.isCurrentPathWriteable=function(){var e=this,r=e.currentSharedFolderPermissionRole;return!e.isInsideSharedFolder||r===i.NameSpaceAccess.ACCESS_WRITER||r===i.NameSpaceAccess.ACCESS_OWNER},e.prototype.getNameOfTargetFolder=function(){return s.filename(this.currentFQPath)},e})();r.BrowseContext=d;var p=(function(){function e(e){this.title=e.title,this.pad_id=e.pad_id,this.url=e.url,this.title_highlights=e.title_highlights,this.highlight_spans=e.highlight_spans,this.creator_name=e.creator_name,this.last_modified_date=e.last_modified_date,this.request_id=e.request_id,this.sort_rank=e.sort_rank,this.ts=e.ts}return e.fromServerObject=function(r){return new e(r)},e})();r.Paper=p;var E=(function(){function e(e){this.name=e.name,this.url=e.url,this.folder_id=e.folder_id,this.is_project=e.is_project,this.title_highlights=e.title_highlights,this.highlight_spans=e.highlight_spans,this.request_id=e.request_id,this.sort_rank=e.sort_rank}return e.fromServerObject=function(r){return new e(r)},e})();r.PaperFolder=E}),define("modules/clean/react/maestro/a11y_constants",["require","exports"],function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(function(e){e[e.TITLE=0]="TITLE",e[e.SEARCH_BAR=1]="SEARCH_BAR",e[e.NOTIFICATION_BELL=2]="NOTIFICATION_BELL",e[e.CALENDAR_FLYOUT=3]="CALENDAR_FLYOUT",e[e.ACCOUNT_MENU=4]="ACCOUNT_MENU",e[e.MAIN_CONTENT=5]="MAIN_CONTENT",e[e.SIDE_BAR=6]="SIDE_BAR"})(r.LAYOUT_TAB_ORDER||(r.LAYOUT_TAB_ORDER={}))}),define("modules/clean/react/maestro/header",["require","exports","tslib","external/react","modules/clean/react/css","modules/clean/react/maestro/top_menu_container","modules/clean/react/maestro_nav/shared_code/dropbox_logo","modules/clean/react/maestro/a11y_constants","modules/clean/react/maestro/responsive","external/classnames","modules/clean/user_education/user_education_client"],function(e,r,t,n,s,o,a,i,c,_,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r.prototype.render=function(){return n.createElement("header",{className:"maestro-header page-header__shadow"},n.createElement(c.VerticallyFixedWrapper,{className:"page-header",responsive:this.props.responsive},n.createElement("div",{className:_("page-header__title",this.props.titleClass),tabIndex:i.LAYOUT_TAB_ORDER.TITLE},n.createElement(l.UserEducationEffect,{containerName:"PageletMaestroHeader",name:"Title",useSpan:!0},this.props.title)),n.createElement(o.TopMenuContainer,t.__assign({},this.props))))},r.defaultProps={showSearchBar:!0,isSearchBarExpanded:!1},r})(n.Component),h=function(e){var r=e.children;return n.createElement("h1",{className:"page-header__heading"},r)};r.MaestroHeaderTitle=h;var d=function(){return n.createElement("a",{href:"/",className:"page-header__logo"},n.createElement(a.DropboxLogo,{alt:"Dropbox"}))};r.MaestroHeaderLogo=d;var p=s(u,["/static/css/maestro_layout-vflEklD7B.css"]);r.PageletMaestroHeader=p}),define("modules/clean/react/maestro/layout",["require","exports","tslib","external/react","external/spectrum/match","modules/clean/react/maestro/header","modules/clean/react/maestro/secondary_sidebar","modules/clean/react/maestro/a11y_constants","modules/clean/react/maestro/responsive"],function(e,r,t,n,s,o,a,i,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var _=(function(e){function r(r){var t=e.call(this,r)||this;t.isPageResponsive=function(){return!(!document||!document.documentElement)&&document.documentElement.classList.contains(c.RESPONSIVE_CLASS)},t.handleSetup=function(){t.setState({setupComplete:!0})},t.handleMatchMedium=function(){t.setState({isMatchedMedium:!0})},t.handleUnmatchMedium=function(){t.setState({isMatchedMedium:!1})},t.handleMatchLarge=function(){t.setState({isMatchedLarge:!0})},t.handleUnmatchLarge=function(){t.setState({isMatchedLarge:!1})};var n=t.isPageResponsive();return t.state={isResponsive:n,isMatchedMedium:!n,isMatchedLarge:!n,setupComplete:!n},t}return t.__extends(r,e),r.prototype.render=function(){var e=this.props,r=e.user,_=e.titleRegion,l=e.titleClass,u=e.embeddedAppRegion,h=e.actionSidebarRegion,d=e.searchBarProps,p=this.state,E=p.setupComplete,S=t.__rest(p,["setupComplete"]);return n.createElement("div",{className:"maestro-chrome"},S.isResponsive&&n.createElement(s.Match,{media:c.BREAKPOINT_LARGE,onSetup:this.handleSetup,onMatch:this.handleMatchLarge,onUnmatch:this.handleUnmatchLarge}),S.isResponsive&&n.createElement(s.Match,{media:c.BREAKPOINT_MEDIUM,onSetup:this.handleSetup,onMatch:this.handleMatchMedium,onUnmatch:this.handleUnmatchMedium}),E&&n.createElement(o.PageletMaestroHeader,t.__assign({user:r,title:_,titleClass:l,responsive:S},d||{})),E&&n.createElement("main",{className:"maestro-app"},n.createElement("div",{className:"maestro-app-content",tabIndex:i.LAYOUT_TAB_ORDER.MAIN_CONTENT},"function"==typeof u?u(S):u),h&&n.createElement("div",{className:"maestro-secondary-sidebar__shadow",tabIndex:i.LAYOUT_TAB_ORDER.SIDE_BAR},n.createElement(a.MaestroSecondarySidebar,{responsive:S},"function"==typeof h?h(S):h))))},r})(n.PureComponent);r.MaestroChrome=_}),define("modules/clean/react/maestro/responsive",["require","exports","tslib","external/react","external/spectrum/vertically_fixed"],function(e,r,t,n,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RESPONSIVE_CLASS="maestro--responsive",r.BREAKPOINT_MEDIUM="(min-width: 736px)",r.BREAKPOINT_LARGE="(min-width: 1025px)";var o=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r.prototype.render=function(){var e=this.props,r=e.responsive,o=t.__rest(e,["responsive"]),a=r&&r.isResponsive?"div":s.VerticallyFixed;return n.createElement(a,o)},r.displayName="VerticallyFixedWrapper",r})(n.Component);r.VerticallyFixedWrapper=o}),
define("modules/clean/react/maestro/secondary_sidebar",["require","exports","tslib","external/react","modules/clean/react/maestro/responsive","modules/clean/react/prompt/legacy_ha_wrapper"],function(e,r,t,n,s,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r.prototype.render=function(){return n.createElement(s.VerticallyFixedWrapper,{responsive:this.props.responsive,className:"maestro-secondary-sidebar"},this.props.children,n.createElement(o.LegacyHAWrapper,null))},r})(n.Component);r.MaestroSecondarySidebar=a}),define("modules/clean/react/maestro/top_menu_container",["require","exports","tslib","external/react","modules/clean/browse_uri_interface","modules/clean/filepath","modules/clean/react/browse/models","modules/core/browser","modules/clean/search/search_bar/controller","modules/clean/search/search_bar/log_helper","modules/core/uri","modules/clean/react/css","modules/clean/web_user_action_events"],function(e,r,t,n,s,o,a,i,c,_,l,u,h){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var d=(function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.onSearch=function(e){var t=e.query,n=e.searchToken,s=e.searchSessionId,o=e.searchPath,a=r.props.user,c=new l.URI({path:"/search/"+a.role});t&&i.redirect(c.updateQuery({path:o,query:t,searchSessionId:s,search_token:n}).toString())},r.onSlimSearchResultOpen=function(e){var t=r.props.user;if(e instanceof a.Paper||e instanceof a.PaperFolder)i.open_tab(e.url);else{var n=e;if(n.is_dir){var s=new l.URI({path:"/"+t.role+n.fq_path});i.open_tab(s.toString())}else{var o=n.fq_path.substring(1),s=new l.URI({path:"/"+t.role}).updateQuery({preview:o});i.open_tab(s.toString())}}},r.logSearchResultOpen=function(e){var t=r.props.user;e instanceof a.File?_.logDropdownSearchAction({result:e,user:t,action_type:e.is_dir?h.WebUserActionLogEvent.FOLDER_OPEN:h.WebUserActionLogEvent.FILE_VIEW,viewport:"top-menu-dropdown-view"}):(e instanceof a.Paper||e instanceof a.PaperFolder)&&_.logDropdownSearchAction({result:e,user:t,action_type:h.WebUserActionLogEvent.PAPER_OPEN,viewport:"top-menu-dropdown-view"})},r.onResultObjectPathClick=function(e){var t=r.props.user;_.logDropdownSearchAction({result:e,user:t,action_type:h.WebUserActionLogEvent.CLICK_PATH_LINK,viewport:"dropdown-view"});var n=o.parent_dir(e.fq_path),a=s.browse_uri_for_fq_path(t,n||"").toString();i.open_tab(a)},r}return t.__extends(r,e),r.prototype.renderSearchBar=function(){return this.props.showSearchBar&&this.props.user?n.createElement(c.SearchBarController,{user:this.props.user,currentPath:this.props.currentPath,isExpanded:this.props.isSearchBarExpanded,onSearch:this.props.onSearch||this.onSearch,onCancelSearch:this.props.onCancelSearch,onSearchResultOpen:this.props.onSearchResultOpen||this.logSearchResultOpen,onSlimSearchResultOpen:this.props.onSearchResultOpen?void 0:this.onSlimSearchResultOpen,onResultObjectPathClick:this.props.onResultObjectPathClick||this.onResultObjectPathClick,searchBarExperiments:this.props.searchBarExperiments||{}}):null},r.prototype.renderRightContent=function(){return this.props.rightContent?this.props.rightContent:n.createElement("div",{className:"top-menu-container--search-bar-empty-space"})},r.prototype.render=function(){return n.createElement("div",{className:"top-menu-container "+this.props.classNames},this.renderSearchBar(),this.renderRightContent())},r.defaultProps={showSearchBar:!0,isSearchBarExpanded:!1,classNames:"",currentPath:"/"},r})(n.Component);r.TopMenuContainer=u(d,["/static/css/pagelet-vflBp79rc.css"],[c.SearchBarController])}),define("modules/clean/react/prompt/legacy_ha_wrapper",["require","exports","tslib","external/react","modules/clean/upsell/prompt_event_emitter"],function(e,r,t,n,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r.emitUpdateEvent=function(){s.Emitter.emit(s.Events.REACT_HA_DID_UPDATE)},r.prototype.componentDidMount=function(){r.emitUpdateEvent()},r.prototype.componentDidUpdate=function(){r.emitUpdateEvent()},r.prototype.render=function(){return n.createElement("div",null)},r.displayName="LegacyHAWrapper",r})(n.Component);r.LegacyHAWrapper=o}),define("modules/clean/search/api_helpers",["require","exports"],function(e,r){"use strict";function t(){return(new Date).getTimezoneOffset()}Object.defineProperty(r,"__esModule",{value:!0}),r.getCurrentTimezoneOffset=t}),define("modules/clean/search/constants",["require","exports"],function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MaxResults={MAX_SEARCH_SUGGESTIONS:8,MAX_SEARCH_RESULTS:100},r.FOCUS_SEARCH_BAR_ACTION="search__FOCUS_SEARCH_BAR",r.BLUR_SEARCH_BAR_ACTION="search__BLUR_SEARCH_BAR",r.SET_SEARCH_QUERY_ACTION="search__SET_SEARCH_QUERY",r.SET_SEARCH_SUGGESTIONS_ACTION="search__SET_SEARCH_SUGGESTIONS",r.SET_SLIM_SEARCH_SUGGESTIONS_ACTION="search__SET_SLIM_SEARCH_SUGGESTIONS",r.SET_HIGHLIGHTED_ROW_ACTION="search__SET_HIGHLIGHTED_ROW",r.HIGHLIGHT_PREVIOUS_ROW_ACTION="search__HIGHLIGHT_PREVIOUS_ROW",r.HIGHLIGHT_NEXT_ROW_ACTION="search__HIGHLIGHT_NEXT_ROW",r.CLEAR_SEARCH_BAR_ACTION="search__CLEAR_SEARCH_BAR",r.SEARCH_SUCCESSFUL_ACTION="search__SEARCH_SUCCESSFUL",r.CLEAR_ALL_HISTORY_ACTION="search__CLEAR_ALL_HISTORY",r.START_SEARCH_ACTION="search__START_SEARCH",r.SET_SEARCH_RESULTS_ACTION="search__SET_SEARCH_RESULTS",r.CONTINUE_SEARCH_ACTION="search__CONTINUE_SEARCH",r.APPEND_SEARCH_RESULTS_ACTION="search__APPEND_SEARCH_RESULTS",r.SET_FULL_SEARCH_RESULTS_ACTION="search__SET_FULL_SEARCH_RESULTS_ACTION",r.CLEAR_SEARCH_ACTION="search__CLEAR_SEARCH",r.SET_SEARCH_SELECTION_ACTION="search__SET_SEARCH_SELECTION",r.CHANGE_FILES_ACTION="search__CHANGE_SEARCH_FILES",r.SET_SCOPE_CHIP_ACTION="search__SET_SCOPE_CHIP_ACTION",r.FULLTEXT_SEARCH_ENDPOINT="/ajax_fulltext_search",r.PARTIAL_SEARCH_ENDPOINT="/ajax_fulltext_search_partial_result",r.SEARCH_METADATA_ENDPOINT="/search/search_metadata";(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_ADDITIONAL_PAGE="LOADING_ADDITIONAL_PAGE"})(r.SearchLoadingState||(r.SearchLoadingState={})),r.SEARCH_RECENT_HISTORY_CAPACITY=5,r.SEARCH_RECENT_HISTORY_STORAGE_KEY="search_recent_history"}),define("modules/clean/search/logger",["require","exports","tslib","modules/clean/analytics","modules/clean/search/api_helpers","modules/clean/react/browse/logger_util"],function(e,r,t,n,s,o){"use strict";function a(e){var r=e.searchSessionId,a=e.result,i=e.user,c=e.action_type,_=e.viewport,l=void 0===_?"full-view":_,u=e.view_type,h=(e.latency,e.displayed,s.getCurrentTimezoneOffset()),d={viewport:l,action_type:c,search_session_id:r,view_type:u,position:a.sort_rank,request_id:a.request_id,timezone_offset:h};if(o.isFile(a)){var p=a;d=t.__assign({},d,{file_nsid:p.ns_id,file_sjid:p.sjid,match_type:p.match_type})}else if(o.isPaper(a)){var E=a;d=t.__assign({},d,{paper_pad_id:E.pad_id,position:E.sort_rank,request_id:E.request_id})}else if(o.isPaperFolder(a)){var S=a;d=t.__assign({},d,{paper_folder_id:S.folder_id,position:S.sort_rank,request_id:S.request_id})}n.SearchClientActivityLogger.log("result_action",i.id,d)}function i(e){var r=e.searchSessionId,t=e.user,o=e.history,a=s.getCurrentTimezoneOffset(),i=o.map(function(e){return e.rawQuery}).reduce(function(e,r,t){return e[t]=r,e},{}),c={search_session_id:r,recent_history_map:JSON.stringify(i),timezone_offset:a,viewport:"dropdown-view"};n.SearchClientActivityLogger.log("recent_history_displayed",t.id,c)}function c(e){var r=e.searchSessionId,t=e.user,o=s.getCurrentTimezoneOffset(),a={search_session_id:r,timezone_offset:o,viewport:"dropdown-view"};n.SearchClientActivityLogger.log("recent_history_cleared",t.id,a)}function _(e){var r=e.searchSessionId,t=e.query,o=e.user,a=e.rank,i=e.action_type,c=s.getCurrentTimezoneOffset(),_={search_session_id:r,query_string:t.rawQuery,position:a,timezone_offset:c,viewport:"dropdown-view",action_type:i};n.SearchClientActivityLogger.log("recent_query_selected",o.id,_)}function l(e){var r=e.searchSessionId,t=e.requestId,o=e.query,a=e.user,i=e.previousPosition,c=e.viewport,_=void 0===c?"dropdown-view":c,l=s.getCurrentTimezoneOffset(),u={search_session_id:r,request_id:t,query_string:o.rawQuery,position:i,timezone_offset:l,viewport:_};n.SearchClientActivityLogger.log("recent_query_stored",a.id,u)}function u(e){var r=e.searchSessionId,t=e.user,o=e.chipAdded,a=s.getCurrentTimezoneOffset(),i={search_session_id:r,timezone_offset:a,path_scoped:o};n.SearchClientActivityLogger.log("scope_chip_changed",t.id,i)}function h(e){var r=e.searchSessionId,t=e.user,o=s.getCurrentTimezoneOffset(),a={search_session_id:r,timezone_offset:o};n.SearchClientActivityLogger.log("search_bar_focus_lost",t.id,a)}function d(e,r){var n=e;return t.__assign({},r,{file_nsid:n.ns_id,file_sjid:n.sjid,match_type:n.match_type||void 0})}function p(e){var r=e.searchSessionId,t=e.result,o=e.user,a=e.previewRequestId,i=e.viewport,c=void 0===i?"dropdown-view":i,_=s.getCurrentTimezoneOffset(),l={search_session_id:r,preview_request_id:a,timezone_offset:_,viewport:c};n.SearchClientActivityLogger.log("preview_started",o.id,d(t,l))}function E(e){var r=e.searchSessionId,t=e.result,o=e.user,a=e.previewRequestId,i=e.viewport,c=void 0===i?"dropdown-view":i,_=e.latency,l=e.displayed,u=s.getCurrentTimezoneOffset(),h={search_session_id:r,preview_request_id:a,timezone_offset:u,viewport:c,latency:_,displayed:l?"true":"false"};n.SearchClientActivityLogger.log("preview_completed",o.id,d(t,h))}function S(e){var r=e.searchSessionId,t=e.result,o=e.user,a=e.previewRequestId,i=e.viewport,c=void 0===i?"dropdown-view":i,_=e.failureType,l=s.getCurrentTimezoneOffset(),u={search_session_id:r,preview_request_id:a,timezone_offset:l,viewport:c,failure_type:_};n.SearchClientActivityLogger.log("preview_failed",o.id,d(t,u))}Object.defineProperty(r,"__esModule",{value:!0}),r.logSearchAction=a,r.logRecentHistoryDisplayed=i,r.logRecentHistoryCleared=c,r.logRecentQuerySelected=_,r.logRecentQueryStored=l,r.logScopeChipChanged=u,r.logSearchBarFocusLost=h,r.logHoverPreviewStarted=p,r.logHoverPreviewCompleted=E,r.logHoverPreviewFailed=S}),define("modules/clean/search/models",["require","exports","external/deep-freeze","modules/clean/react/browse/models"],function(e,r,t,n){"use strict";function s(e){return new n.BrowseContext({isInFolderMode:e.inside_dir,inactiveNSIDByFQPath:e.old_path_to_ns_id,blockHash:e.block_hash})}Object.defineProperty(r,"__esModule",{value:!0});var o=(function(){function e(e){this.fq_path=e.fq_path,this.is_unmounted=e.is_unmounted,this.icon=e.icon,this.filename_highlights=e.filename_highlights,this.highlight_spans=e.highlight_spans,this.ns_id=e.ns_id,this.sjid=e.sjid,this.is_dir=e.is_dir,this.type=e.type,this.match_type=e.match_type,this._mount_access_perms=e.mount_access_perms,this.thumbnail_url_tmpl=e.thumbnail_url_tmpl,this.hover_preview_url=e.hover_preview_url,this.request_id=e.request_id,this.sort_rank=e.sort_rank,t(this)}return e.fromServerObject=function(r){return new e(r)},e})();r.SlimFileSearchResult=o,r.extractBrowseContext=s}),define("modules/clean/search/search_bar/api",["require","exports","tslib","modules/clean/ajax","modules/clean/filepath","modules/clean/search/constants","modules/clean/analytics","modules/clean/react/browse/models","modules/clean/search/types","modules/clean/search/models","modules/clean/search/api_helpers"],function(e,r,t,n,s,o,a,i,c,_,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=(function(e){function r(r){var t=this.constructor,n=this,s=t.prototype;return n=e.call(this,r)||this,n.__proto__=s,n}return t.__extends(r,e),r})(Error);r.RequestAbortedError=u;var h=(function(){function e(){this._searchApiUrl="/search/dropdown_search",this._activeRequest=null}return e.prototype.getSearchApiUrl=function(){return this._searchApiUrl},e.prototype.abortPreviousLoading=function(){null!=this._activeRequest&&this._activeRequest.abort()},e.prototype._extractSlimSearchResultsList=function(e){for(var r=[],t=0,n=e;t<n.length;t++){var s=n[t];switch(s.search_result_type){case c.SearchResultTypes.FILE:r.push(_.SlimFileSearchResult.fromServerObject(s));break;case c.SearchResultTypes.PAPER:r.push(i.Paper.fromServerObject(s));break;case c.SearchResultTypes.PAPER_FOLDER:r.push(i.PaperFolder.fromServerObject(s))}}return r},e.prototype.loadSlimResults=function(e){var r=e.user,t=e.path,n=e.query,s=e.searchSessionId,o=e.experiments,a=e.webTimer,i=l.getCurrentTimezoneOffset(),c=o.expDropdownThumbnail,_=o.expHoverPreviews,u=o.expPaperFolders,h={query:n,fq_path:t,timezone_offset:i,thumbnail_exp_variant:c,hover_preview_size:_,show_paper_folder_results:u};return this._fetchSlimResults(h,r,s,a)},e.prototype.fetchAdditionalFileMetadata=function(e){var r=this,t=e.searchResults,s=e.user;return new Promise(function(e,a){var i=t.filter(function(e){return e instanceof _.SlimFileSearchResult}),c=i.map(function(e){return[e.ns_id,e.sjid]});c.length>0?n.WebRequest({url:o.SEARCH_METADATA_ENDPOINT,data:{nsid_sjid_pairs:JSON.stringify(c)},dataType:"json",subject_user:s,success:function(n,s,o){e(r._mergeFullResultsIntoSlimResults(n.search_results,t))},error:function(e,r,t){a("abort"===t?new u:new Error(t))}}):e(t)})},e.prototype._mergeFullResultsIntoSlimResults=function(e,r){for(var n=[],o=function(r){if(r instanceof _.SlimFileSearchResult){var o=e.find(function(e){return e.search_result_type===c.SearchResultTypes.FILE&&s.paths_are_equal(e.fq_path,r.fq_path)});o&&n.push(i.File.fromServerObject(t.__assign({},o,{request_id:r.request_id,sort_rank:r.sort_rank,match_type:r.match_type})))}else(r instanceof i.Paper||r instanceof i.PaperFolder)&&n.push(r)},a=0,l=r;a<l.length;a++){o(l[a])}return n},e.prototype._fetchSlimResults=function(e,r,t,s){var o=this;return new Promise(function(i,c){var l;null!=o._activeRequest&&o._activeRequest.abort();var h={path_scoped:"/"!==e.fq_path,search_type:"dropdown",query_string:e.query,search_session_id:t,timezone_offset:e.timezone_offset};a.SearchClientActivityLogger.log("query_started",r.id,h);var d=(new Date).getTime();o._activeRequest=n.WebRequest({url:o._searchApiUrl,data:e,dataType:"json",subject_user:r,success:function(n,c,l){for(var u=_.extractBrowseContext(n),p=n.search_results,E=l.getResponseHeader("x-dropbox-request-id"),S=0,m=0,f=p;m<f.length;m++){var T=f[m];T.request_id=E,T.sort_rank=S++}var R=o._extractSlimSearchResultsList(p),A=a.SearchClientActivityLogger.create_search_log_dict(h,!1,E,d,e.query,R.length,null,t);a.SearchClientActivityLogger.log("query_completed",r.id,A),s&&s.end(E?E:void 0),i({context:u,searchResults:R,deleted:!1})},error:function(n,o,i){l=n.getResponseHeader("x-dropbox-request-id");var _=a.SearchClientActivityLogger.create_search_log_dict(h,null,l,d,e.query,null,o,t);a.SearchClientActivityLogger.log("query_failed",r.id,_),s&&s.abort(),c("abort"===i?new u:new Error(i))},complete:function(){this._activeRequest=null}})})},e})();r.SearchBarApiClient=h,r.searchBarApiClient=new h}),define("modules/clean/search/search_bar/chips",["require","exports","modules/clean/filepath"],function(e,r,t){"use strict";function n(e){return t.paths_are_equal(e,"/")}function s(e){return!!e&&!n(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.isScopeChipRoot=n,r.isValidPathForChip=s}),define("modules/clean/search/search_bar/controller",["require","exports","tslib","external/react","external/react-redux","modules/clean/keycode","modules/clean/react/browse/models","modules/clean/search/logger","modules/clean/search/search_bar/api","modules/clean/search/search_bar/data/action_creators","modules/clean/search/search_bar/data/selectors","modules/clean/search/search_bar/data/store","modules/clean/search/search_bar/log_helper","modules/clean/search/search_bar/view","modules/clean/search/search_helpers","modules/clean/search/search_bar/chips","modules/clean/storage","modules/clean/viewer","modules/clean/web_timing_logger","modules/clean/web_user_action_events","modules/core/notify","modules/clean/search/types","modules/clean/react/css","modules/clean/search/search_bar/experiments"],function(e,r,t,n,s,o,a,i,c,_,l,u,h,d,p,E,S,m,f,T,R,A,C,O){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var I=(function(e){function r(r){var t=e.call(this,r)||this;return t._searchBarWebTimer=null,t._logHistoryItemSelected=function(e,r,n){i.logRecentQuerySelected({searchSessionId:t.props.searchSessionId,query:e,user:t.props.user,rank:r-t.props.headerItems.length,action_type:n})},t._handleHistoryItemClick=function(e,r){t._logHistoryItemSelected(e,r),t._setSearchQuery(e.rawQuery)},t._handleRecentSearchContextMenuCapture=function(e,r){t._logHistoryItemSelected(e,r,T.WebUserActionLogEvent.CONTEXT_MENU)},t._handleInputChange=function(e){t._setSearchQuery(e.currentTarget.value)},t._handleCancelSearch=function(){t._setSearchQuery("")},t._handleScopeChipChange=function(e){i.logScopeChipChanged({searchSessionId:t.props.searchSessionId,user:t.props.user,chipAdded:e}),e?t.props.setScopeChip({scopeChip:t.props.browseScope}):t.props.setScopeChip({}),t._setSearchQuery(t.props.rawQuery,!0)},t._onBrowseScopeChange=function(e){t.props.setScopeChip({scopeChip:E.isValidPathForChip(e)?e:void 0})},t._handleInputKeydown=function(e,r){if(e.keyCode===o.KeyCode.ESC){t._handleCancelSearch();var n=t.props.onCancelSearch;return void(n&&n())}if(e.keyCode===o.KeyCode.BACKSPACE&&0===r&&!E.isScopeChipRoot(t.props.scopeChip))return void t._handleScopeChipChange(!1);e.stopPropagation(),e.keyCode===o.KeyCode.UP?(e.preventDefault(),t.props.highlightPreviousRow()):e.keyCode===o.KeyCode.DOWN&&(e.preventDefault(),t.props.highlightNextRow())},t._handleSearch=function(e){t.props.onSearch({query:e,searchToken:p.getSearchCsrfToken(),searchSessionId:t.props.searchSessionId,searchPath:t.props.scopeChip})},t._navToSelection=function(e,r){var n=t.props.searchSuggestions[e-r],s=t.props.slimSearchSuggestions[e-r];n?(t._handleSlimSearchResultOpen(s),t._openSearchResult(n)):t._handleSearchResultOpen(s)},t._handleInputSubmit=function(e,r){e.preventDefault();var n=t.props.headerItems;if(r<n.length)switch(n[r]){case A.SearchBarDropdownHeaderItemType.SEARCH_ALL:t._handleSearch(t.props.normalizedQuery);break;case A.SearchBarDropdownHeaderItemType.SCOPE_CHIPS:var s=!E.isValidPathForChip(t.props.scopeChip);t._handleScopeChipChange(s)}else t._navToSelection(r,n.length)},t._handleContextMenuCapture=function(e){var r=t.props,n=r.user,s=r.searchSessionId;p.fetchFullSearchResult({searchBarApiClient:c.searchBarApiClient,searchResult:e,user:n,onSuccess:function(e){t._dispatchSearchSuccessful(e.request_id||""),h.logDropdownSearchAction({result:e,user:n,action_type:e instanceof a.File?T.WebUserActionLogEvent.CONTEXT_MENU:T.WebUserActionLogEvent.PAPER_CONTEXT_MENU,viewport:"dropdown-view",searchSessionId:s})}})},t._handleSlimSearchResultOpen=function(e){var r=t.props.onSlimSearchResultOpen;r&&r(e)},t._handleSearchResultOpen=function(e){var r=t.props.user;t._handleSlimSearchResultOpen(e),p.fetchFullSearchResult({searchBarApiClient:c.searchBarApiClient,searchResult:e,user:r,onSuccess:function(e){t._openSearchResult(e)},onError:function(e){R.Notify.error(e)}})},t._handleResultObjectPathClick=function(e){t._dispatchSearchSuccessful(e.request_id||""),t.props.onResultObjectPathClick(e)},t._handleHighlightDropdownItem=function(e){t.props.setHighlightedRow({highlightedSearchRow:e})},t._handleSearchBarFocus=function(){var e=t.props.user;t.props.focusSearchBar({user:e})},t._handleSearchBarBlur=function(){t.props.blurSearchBar()},t._dispatchSearchSuccessful=function(e){if(O.recentHistoryEnabled(t.props.searchBarExperiments)){var r=t.props,n=r.user,s=r.rawQuery,o=r.normalizedQuery,a=r.searchSessionId;(0,r.addQueryToHistory)({user:n,query:{rawQuery:s,normalizedQuery:o},searchSessionId:a,requestId:e})}},t._logSearchBarTTI=function(){t._searchBarWebTimer&&t._searchBarWebTimer.markTimeToInteractive()},t._handleHistoryClearAllClick=function(){var e=t.props,r=e.user;(0,e.clearAllHistory)({user:r})},r.setExperiments({experiments:r.searchBarExperiments}),t.props.setScopeChip({scopeChip:r.currentPath}),t}return t.__extends(r,e),r.prototype.componentWillMount=function(){if(O.recentHistoryEnabled(this.props.searchBarExperiments)){var e=m.Viewer.get_viewer().get_users().map(function(e){return e.id});S.UserLocalStorage.clearOtherUsers(e)}},r.prototype.componentWillUnmount=function(){this._logFocusLost(this.props.isFocused,!1)},r.prototype.componentWillReceiveProps=function(e){this.props.currentPath!==e.currentPath&&this._onBrowseScopeChange(e.currentPath)},r.prototype.componentDidUpdate=function(e){this._logFocusLost(e.isFocused,this.props.isFocused)},r.prototype._logFocusLost=function(e,r){O.recentHistoryEnabled(this.props.searchBarExperiments)&&e&&!r&&i.logSearchBarFocusLost({user:this.props.user,searchSessionId:this.props.searchSessionId})},r.prototype._setSearchQuery=function(e,r){void 0===r&&(r=!1);var t=this.props,n=t.user;(0,t.setSearchQueryAndFetchResults)({user:n,query:e,webTimer:this._startSearchBarTimer(),keepHighlightedRow:r})},r.prototype._openSearchResult=function(e){this._dispatchSearchSuccessful(e.request_id||""),this.props.onSearchResultOpen(e)},r.prototype._startSearchBarTimer=function(){return this._searchBarWebTimer?this._searchBarWebTimer.restart():(this._searchBarWebTimer=f.get_timer("search_bar"),this._searchBarWebTimer.initialize({requireTTI:!0,requireTTV:!1,url:c.searchBarApiClient.getSearchApiUrl()})),this._searchBarWebTimer},r.prototype.render=function(){var e=this.props,r=e.user,t=e.isExpanded,s=e.placeholder,o=e.isFocused,a=e.isActive,i=e.rawQuery,c=e.normalizedQuery,_=e.slimSearchSuggestions,l=e.searchBarLoading,u=e.searchSessionId,h=e.highlightedRow,p=e.searchHistory,E=e.scopeChip,S=e.searchPath,m=e.headerItems,f=e.searchBarExperiments,T=e.browseScope;return n.createElement(d.SearchBarView,{user:r,isExpanded:t,searchBarExperiments:f,placeholder:s,isFocused:o,isActive:a,rawQuery:i,normalizedQuery:c,suggestions:_,searchBarLoading:l,searchSessionId:u,highlightedRow:h,searchHistory:p,scopeChip:E,browseScope:T,searchPath:S,dropdownHeaderItems:m,onSearch:this._handleSearch,onHistoryClearAllClick:this._handleHistoryClearAllClick,onHistoryItemClick:this._handleHistoryItemClick,onInputChange:this._handleInputChange,onInputKeydown:this._handleInputKeydown,onInputSubmit:this._handleInputSubmit,onSearchResultOpen:this._handleSearchResultOpen,onContextMenuCapture:this._handleContextMenuCapture,onRecentSearchContextMenuCapture:this._handleRecentSearchContextMenuCapture,onResultObjectPathClick:this._handleResultObjectPathClick,onSearchBarFocus:this._handleSearchBarFocus,onSearchBarBlur:this._handleSearchBarBlur,onHighlightDropdownItem:this._handleHighlightDropdownItem,onSearchChipInteraction:this._handleScopeChipChange,onDropdownTTI:this._logSearchBarTTI})},r})(n.PureComponent);r.SearchBarControllerElement=I;var g=u.getStoreForSearchBar(),y=function(e){var r=l.isSearchBarFocused,t=l.isSearchBarActive,n=l.rawQuery,s=l.normalizedQuery,o=l.searchSuggestions,a=l.slimSearchSuggestions,i=l.isSearchBarLoading,c=l.searchSessionId,_=l.highlightedSearchRow,u=l.searchHistory,h=l.scopeChip,d=l.searchPath,p=l.headerItems,E=l.browseScope;return{isFocused:r(e),isActive:t(e),rawQuery:n(e),normalizedQuery:s(e),searchSuggestions:o(e),slimSearchSuggestions:a(e),searchBarLoading:i(e),searchSessionId:c(e),highlightedRow:_(e),searchHistory:u(e),scopeChip:h(e),searchPath:d(e),headerItems:p(e),browseScope:E(e)}},D={blurSearchBar:_.blurSearchBar,focusSearchBar:_.focusSearchBar,highlightPreviousRow:_.highlightPreviousRow,highlightNextRow:_.highlightNextRow,setHighlightedRow:_.setHighlightedRow,addQueryToHistory:_.addQueryToHistory,setSearchQueryAndFetchResults:_.setSearchQueryAndFetchResults,clearAllHistory:_.clearAllHistory,setExperiments:_.setExperiments,setScopeChip:_.setScopeChip},v=s.connect(y,D)(I),L=function(e){return n.createElement(s.Provider,{store:g},n.createElement(v,t.__assign({},e)))};r.SearchBarController=C(L,["/static/css/search/search_bar_react-vflFLuWy6.css"])}),define("modules/clean/search/search_bar/data/action_creators",["require","exports","tslib","modules/clean/search/search_bar/api","modules/clean/search/search_bar/data/selectors","modules/clean/search/search_bar/data/types","modules/clean/search/search_bar/history","modules/clean/search/search_bar/experiments"],function(e,r,t,n,s,o,a,i){"use strict";var c=this;Object.defineProperty(r,"__esModule",{value:!0}),r.focusSearchBar=function(e){var t=e.user;return function(e,n){i.recentHistoryEnabled(s.experiments(n()))&&e(r.updateHistoryInternal({searchHistory:a.getHistory(t)})),e(r.focusSearchBarActionInternal())}},r.focusSearchBarActionInternal=function(){return{type:o.ActionTypes.FOCUS}},r.blurSearchBar=function(){return{type:o.ActionTypes.BLUR}},r.clearSearchBar=function(){return{type:o.ActionTypes.CLEAR}},r.updateHistoryInternal=function(e){var r=e.searchHistory;return{type:o.ActionTypes.UPDATE_HISTORY,payload:{searchHistory:r}}},r.addQueryToHistory=function(e){var t=e.user,n=e.query,s=e.searchSessionId,o=e.requestId;return function(e,i){var c=a.addQuery(t,n,s,o);e(r.updateHistoryInternal({searchHistory:c}))}},r.clearAllHistory=function(e){var t=e.user;return function(e,n){var s=a.clearAll(t);e(r.updateHistoryInternal({searchHistory:s}))}},r.setSearchQuery=function(e){var r=e.query,t=e.searchSessionId,n=e.keepHighlightedRow,s=e.searchPath;return{type:o.ActionTypes.SET_QUERY,payload:{query:r,searchSessionId:t,keepHighlightedRow:n,searchPath:s}}},r.setSearchSuggestions=function(e){var r=e.searchSuggestions,t=e.hasMoreResults;return{type:o.ActionTypes.SET_SUGGESTIONS,payload:{searchSuggestions:r,hasMoreResults:t}}},r.setSlimSearchSuggestions=function(e){var r=e.slimSearchSuggestions,t=e.hasMoreResults;return{type:o.ActionTypes.SET_SLIM_SUGGESTIONS,payload:{slimSearchSuggestions:r,hasMoreResults:t}}},r.setHighlightedRow=function(e){var r=e.highlightedSearchRow;return{type:o.ActionTypes.SET_HIGHLIGHTED_ROW,payload:{highlightedSearchRow:r}}},r.highlightPreviousRow=function(){return{type:o.ActionTypes.HIGHLIGHT_PREVIOUS_ROW}},r.highlightNextRow=function(){return{type:o.ActionTypes.HIGHLIGHT_NEXT_ROW}},r.setBrowseScope=function(e){var r=e.browseScope;return{type:o.ActionTypes.SET_BROWSE_SCOPE,payload:{browseScope:r}}},r.setScopeChip=function(e){var r=e.scopeChip;return{type:o.ActionTypes.SET_SCOPE_CHIP,payload:{scopeChip:r}}},r.setSearchQueryAndFetchResults=function(e){var o=e.user,a=e.query,i=e.webTimer,_=e.searchSessionId,l=e.keepHighlightedRow;return function(e,u){return t.__awaiter(c,void 0,void 0,function(){var c,h,d,p,E,S;return t.__generator(this,function(t){switch(t.label){case 0:if(c=s.scopeChip(u()),(h=function(){return a===s.rawQuery(u())&&c===s.searchPath(u())})())return[2];if(e(r.setSearchQuery({query:a,searchPath:c,searchSessionId:_,keepHighlightedRow:l})),!s.isSearchBarLoading(u()))return[3,5];d=s.experiments(u()),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,n.searchBarApiClient.loadSlimResults({user:o,path:c,query:s.normalizedQuery(u()),searchSessionId:s.searchSessionId(u()),experiments:d,webTimer:i})];case 2:return p=t.sent().searchResults,h()?(e(r.setSlimSearchSuggestions({slimSearchSuggestions:p})),[4,n.searchBarApiClient.fetchAdditionalFileMetadata({searchResults:p,user:o})]):[2];case 3:return E=t.sent(),h()?(e(r.setSearchSuggestions({searchSuggestions:E})),[3,5]):[2];case 4:if(S=t.sent(),!(S instanceof n.RequestAbortedError))throw S;return[3,5];case 5:return[2]}})})}},r.setExperiments=function(e){var r=e.experiments;return{type:o.ActionTypes.SET_EXPERIMENTS,payload:{experiments:r}}}}),define("modules/clean/search/search_bar/data/reducer",["require","exports","tslib","modules/clean/search/search_bar/data/types","modules/clean/search/store_helpers","modules/clean/search/search_bar/chips"],function(e,r,t,n,s,o){"use strict";function a(e,r){switch(void 0===e&&(e=i),r.type){case n.ActionTypes.FOCUS:return c(e,r);case n.ActionTypes.BLUR:return _(e,r);case n.ActionTypes.UPDATE_HISTORY:return l(e,r);case n.ActionTypes.SET_QUERY:return u(e,r);case n.ActionTypes.SET_SUGGESTIONS:return h(e,r);case n.ActionTypes.SET_SLIM_SUGGESTIONS:return d(e,r);case n.ActionTypes.SET_HIGHLIGHTED_ROW:return p(e,r);case n.ActionTypes.HIGHLIGHT_PREVIOUS_ROW:return S(e,r);case n.ActionTypes.HIGHLIGHT_NEXT_ROW:return E(e,r);case n.ActionTypes.SET_BROWSE_SCOPE:return m(e,r);case n.ActionTypes.SET_SCOPE_CHIP:return f(e,r);case n.ActionTypes.CLEAR:return T(e,r);case n.ActionTypes.SET_EXPERIMENTS:return R(e,r);default:return e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SEARCH_BAR_REDUCER_KEY="SEARCH_BAR";var i={isSearchBarFocused:!1,searchHistory:[],query:"",searchSessionId:s.generateRandomId(),searchPath:"",isSearchBarLoading:!1,searchSuggestions:[],hasMoreResults:!1,slimSearchSuggestions:[],highlightedSearchRow:0,browseScope:"/",canScope:!1,scopeChip:"/",experiments:{}},c=function(e,r){return t.__assign({},e,{highlightedSearchRow:0,isSearchBarFocused:!0})},_=function(e,r){return t.__assign({},e,{highlightedSearchRow:0,isSearchBarFocused:!1})},l=function(e,r){var n=r.payload.searchHistory;return t.__assign({},e,{searchHistory:n})},u=function(e,r){var n=r.payload,o=n.query,a=n.searchPath,i=n.searchSessionId,c=n.keepHighlightedRow,_=e.searchSessionId;i?_=i:s.shouldStartNewSearchSession(e.query,o)&&(_=s.generateRandomId());var l=c?e.highlightedSearchRow:0;return t.__assign({},e,{query:o,searchPath:a,searchSessionId:_,searchSuggestions:[],hasMoreResults:!1,isSearchBarLoading:!s.isBlank(o),slimSearchSuggestions:[],highlightedSearchRow:l})},h=function(e,r){var n=r.payload,s=n.searchSuggestions,o=n.hasMoreResults;return t.__assign({},e,{searchSuggestions:s,hasMoreResults:!!o,isSearchBarLoading:!1})},d=function(e,r){var n=r.payload,s=n.slimSearchSuggestions,o=n.hasMoreResults;return t.__assign({},e,{slimSearchSuggestions:s,hasMoreResults:!!o,isSearchBarLoading:!1})},p=function(e,r){var n=r.payload.highlightedSearchRow;return t.__assign({},e,{highlightedSearchRow:n})},E=function(e,r){var n=!s.isBlank(e.query),o=e.slimSearchSuggestions.length||e.searchSuggestions.length||!n&&e.searchHistory.length||0,a=0;a+=n?1:0,a+=e.canScope?1:0;var i=Math.min(o+a-1,e.highlightedSearchRow+1);return t.__assign({},e,{highlightedSearchRow:i})},S=function(e,r){return t.__assign({},e,{highlightedSearchRow:Math.max(0,e.highlightedSearchRow-1)})},m=function(e,r){var n=r.payload.browseScope,s=e.scopeChip,a=o.isValidPathForChip(n);return t.__assign({},e,{browseScope:n,canScope:a,scopeChip:a?s:"/"})},f=function(e,r){var n=r.payload.scopeChip;return t.__assign({},e,{scopeChip:n||"/"})},T=function(e,r){var n=e.scopeChip,s=e.searchHistory,o=e.browseScope,a=e.experiments;return t.__assign({},i,{scopeChip:n,searchHistory:s,browseScope:o,experiments:a})},R=function(e,r){var n=r.payload.experiments;return t.__assign({},e,{experiments:n})};r.searchBarReducer=a}),define("modules/clean/search/search_bar/data/selectors",["require","exports","external/reselect","modules/clean/filepath","modules/clean/react/browse/models","modules/clean/search/search_bar/data/reducer","modules/clean/search/store_helpers","modules/clean/search/types"],function(e,r,t,n,s,o,a,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c=function(e){return e[o.SEARCH_BAR_REDUCER_KEY]};r.isSearchBarFocused=function(e){return c(e).isSearchBarFocused},r.searchHistory=function(e){return c(e).searchHistory},r.rawQuery=function(e){return c(e).query},r.normalizedQuery=function(e){return a.normalize(r.rawQuery(e))},r.searchSessionId=function(e){return c(e).searchSessionId},r.isSearchBarActive=function(e){return!!r.rawQuery(e)},r.searchPath=function(e){return c(e).searchPath},r.isSearchBarLoading=function(e){return c(e).isSearchBarLoading},r.searchSuggestions=function(e){return c(e).searchSuggestions},r.hasMoreResults=function(e){return c(e).hasMoreResults},r.slimSearchSuggestions=function(e){return c(e).slimSearchSuggestions},
r.highlightedSearchRow=function(e){return c(e).highlightedSearchRow},r.searchResultForPath=function(e,t){return r.searchSuggestions(e).find(function(e){return e instanceof s.File&&n.paths_are_equal(e.fq_path,t)})},r.browseScope=function(e){return c(e).browseScope},r.scopeChip=function(e){return c(e).scopeChip},r.canScope=function(e){return c(e).canScope},r.headerItems=t.createSelector(r.normalizedQuery,r.canScope,function(e,r){var t=""!==e,n=[];return t&&n.push(i.SearchBarDropdownHeaderItemType.SEARCH_ALL),r&&n.push(i.SearchBarDropdownHeaderItemType.SCOPE_CHIPS),n}),r.experiments=function(e){return c(e).experiments}}),define("modules/clean/search/search_bar/data/store",["require","exports","modules/clean/redux/store","modules/clean/search/search_bar/data/reducer"],function(e,r,t,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s;r.getStoreForSearchBar=function(){if(!s){var e=(r={},r[n.SEARCH_BAR_REDUCER_KEY]=n.searchBarReducer,r);s=t.getStoreAndRegisterReducers(e)}return s;var r}}),define("modules/clean/search/search_bar/data/types",["require","exports"],function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(function(e){e.FOCUS="SEARCH_BAR/FOCUS",e.BLUR="SEARCH_BAR/BLUR",e.CLEAR="SEARCH_BAR/CLEAR",e.UPDATE_HISTORY="SEARCH_BAR/UPDATE_HISTORY",e.SET_QUERY="SEARCH_BAR/SET_QUERY",e.SET_SUGGESTIONS="SEARCH_BAR/SET_SUGGESTIONS",e.SET_SLIM_SUGGESTIONS="SEARCH_BAR/SET_SLIM_SUGGESTIONS",e.SET_HIGHLIGHTED_ROW="SEARCH_BAR/SET_HIGHLIGHTED_ROW",e.HIGHLIGHT_PREVIOUS_ROW="SEARCH_BAR/HIGHLIGHT_PREVIOUS_ROW",e.HIGHLIGHT_NEXT_ROW="SEARCH_BAR/HIGHLIGHT_NEXT_ROW",e.SET_BROWSE_SCOPE="SEARCH_BAR/SET_BROWSE_SCOPE",e.SET_SCOPE_CHIP="SEARCH_BAR/SET_SCOPE_CHIP",e.SET_EXPERIMENTS="SEARCH_BAR/SET_EXPERIMENTS"})(r.ActionTypes||(r.ActionTypes={}))}),define("modules/clean/search/search_bar/experiments",["require","exports","modules/clean/search/types"],function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.recentHistoryEnabled=function(e){var r=e.expSearchRecentHistory;return r===t.SearchRecentHistoryVariants.WITH_ICON||r===t.SearchRecentHistoryVariants.WITHOUT_ICON},r.hoverPreviewsEnabled=function(e){var r=e.expHoverPreviews;return"CACHED"===r||"UNCACHED"===r}}),define("modules/clean/search/search_bar/history",["require","exports","external/lodash","modules/clean/search/constants","modules/clean/storage","modules/clean/search/logger"],function(e,r,t,n,s,o){"use strict";function a(e){return s.UserLocalStorage.get(e.id,n.SEARCH_RECENT_HISTORY_STORAGE_KEY)||[]}function i(e,r,i,c){void 0===i&&(i=""),void 0===c&&(c="");var _=a(e),l=function(e,r){return e.normalizedQuery===r.normalizedQuery},u=t.findIndex(_,function(e){return l(e,r)});return o.logRecentQueryStored({searchSessionId:i,requestId:c,query:r,user:e,previousPosition:u}),_=_.filter(function(e){return!l(e,r)}),_=[r].concat(_).slice(0,n.SEARCH_RECENT_HISTORY_CAPACITY),s.UserLocalStorage.set(e.id,n.SEARCH_RECENT_HISTORY_STORAGE_KEY,_),_}function c(e,r){void 0===r&&(r=""),o.logRecentHistoryCleared({searchSessionId:r,user:e});var t=[];return s.UserLocalStorage.set(e.id,n.SEARCH_RECENT_HISTORY_STORAGE_KEY,t),t}function _(){s.UserLocalStorage.clearOtherUsers([])}function l(){s.UserLocalStorage.clearOtherUsers([])}Object.defineProperty(r,"__esModule",{value:!0}),r.getHistory=a,r.addQuery=i,r.clearAll=c,r.testMockSetup=_,r.testMockTeardown=l}),define("modules/clean/search/search_bar/log_helper",["require","exports","modules/clean/search/logger","modules/clean/search/search_bar/data/store","modules/clean/search/search_bar/data/selectors"],function(e,r,t,n,s){"use strict";function o(e){var r=e.result,o=e.user,a=e.action_type,i=e.viewport,c=e.view_type,_=e.searchSessionId;t.logSearchAction({searchSessionId:_||s.searchSessionId(n.getStoreForSearchBar().getState()),result:r,user:o,action_type:a,viewport:i,view_type:c})}Object.defineProperty(r,"__esModule",{value:!0}),r.logDropdownSearchAction=o}),define("modules/clean/search/search_bar/view",["require","exports","tslib","external/classnames","external/spectrum/icon_global","external/spectrum/icon_content","external/react","modules/clean/keycode","modules/clean/react/maestro/a11y_constants","modules/clean/search/types","modules/core/i18n","modules/clean/web_timing_logger","modules/clean/search/search_bar/chips","modules/clean/search/search_bar/experiments"],function(e,r,t,n,s,o,a,i,c,_,l,u,h,d){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var p=(function(r){function s(){var e=null!==r&&r.apply(this,arguments)||this;return e._renderDropdown=function(){},e._handleNavigation=function(){e._searchBarInput.blurSearchBarTextInput()},e._onHistoryItemClick=function(r,t){e.props.onHistoryItemClick&&e.props.onHistoryItemClick(r,t)},e._onSearchResultOpen=function(r){e.props.onSearchResultOpen(r),e._handleNavigation()},e._onResultObjectPathClick=function(r){e.props.onResultObjectPathClick(r),e._handleNavigation()},e._onSearch=function(r){var t=e.props.onSearch;t&&t(r),e._handleNavigation()},e._setSearchBarInputRef=function(r){return e._searchBarInput=r},e._setSearchBarDropdownRef=function(r){e._searchBarDropdown=r},e}return t.__extends(s,r),s.prototype.getSearchBarInput=function(){return this._searchBarInput},s.prototype.getSearchBarDropdown=function(){return this._searchBarDropdown},s.prototype._shouldRenderDropdown=function(){var e=this.props,r=e.searchHistory,t=e.normalizedQuery,n=e.dropdownHeaderItems,s=_.SearchBarDropdownHeaderItemType.SCOPE_CHIPS;return!!(d.recentHistoryEnabled(this.props.searchBarExperiments)&&r&&r.length||n&&n.indexOf(s)!==-1||t&&t.length)},s.prototype.componentDidMount=function(){var r=this;u.waitForTTI().then(function(){e(["modules/clean/search/search_bar/dropdown"],function(e){var t=e.SearchBarDropdown;r._renderDropdown=function(){if(r._shouldRenderDropdown()){var e=r.props,n=e.browseScope,s=e.children,o=e.dropdownHeaderItems,i=e.highlightedRow,c=e.isFocused,_=e.normalizedQuery,l=e.onContextMenuCapture,u=e.onDropdownTTI,h=e.onHighlightDropdownItem,d=e.onHistoryClearAllClick,p=e.onRecentSearchContextMenuCapture,E=e.onSearchChipInteraction,S=e.scopeChip,m=e.searchBarExperiments,f=e.searchBarLoading,T=e.searchHistory,R=e.searchPath,A=e.searchSessionId,C=e.showLinkToResultsPage,O=e.suggestions,I=e.user;return a.createElement(t,{browseScope:n,children:s,dropdownHeaderItems:o||[],highlightedRow:i,isOpen:c,normalizedQuery:_,onContextMenuCapture:l,onDropdownTTI:u,onHighlightDropdownItem:h,onHistoryClearAllClick:d,onHistoryItemClick:r._onHistoryItemClick,onRecentSearchContextMenuCapture:p,onResultObjectPathClick:r._onResultObjectPathClick,onSearch:r._onSearch,onSearchChipInteraction:E,onSearchResultOpen:r._onSearchResultOpen,ref:r._setSearchBarDropdownRef,scopeChip:S,searchBarExperiments:m,searchBarLoading:f,searchHistory:T||[],searchPath:R,searchSessionId:A,showLinkToResultsPage:C,suggestions:O,user:I})}return null},r._shouldRenderDropdown()&&r.forceUpdate()})})},s.prototype.render=function(){var e=this.props,r=e.isActive,s=e.isExpanded,o=e.isFocused,i={"is-active":r,"is-collapsed":!(s||o),"is-expanded":s,"is-focused":o,"search-bar":!0};return a.createElement("div",{className:"search-bar--container u-l-fr"},a.createElement("div",{className:n(i)},a.createElement(E,t.__assign({},this.props,{ref:this._setSearchBarInputRef})),this._renderDropdown()))},s.defaultProps={rawQuery:"",normalizedQuery:"",showLinkToResultsPage:!0},s})(a.Component);r.SearchBarView=p;var E=(function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.focusSearchBarTextInput=function(){r.props.isFocused||r._searchBarTextInput.focus()},r._onKeyDown=function(e){e.keyCode===i.KeyCode.ESC&&r.blurSearchBarTextInput(),r.props.onInputKeydown(e,r._getCursorPosition())},r._onSubmit=function(e){var t=r.props.highlightedRow,n=r.props.searchHistory||[],s=!r.props.normalizedQuery&&n.length>0,o=r.props.dropdownHeaderItems||[],a=t-o.length;if(s&&a>=0){e.preventDefault();var i=n[a];return void(r.props.onHistoryItemClick&&r.props.onHistoryItemClick(i,a))}return t<o.length&&o[t]===_.SearchBarDropdownHeaderItemType.SCOPE_CHIPS||r.blurSearchBarTextInput(),r.props.onInputSubmit(e,t)},r._setSearchBarTextInputRef=function(e){return r._searchBarTextInput=e},r}return t.__extends(r,e),r.prototype._getCursorPosition=function(){return this._searchBarTextInput.selectionEnd},r.prototype.getSearchBarTextInput=function(){return this._searchBarTextInput},r.prototype.blurSearchBarTextInput=function(){this._searchBarTextInput.blur(),this.props.onSearchBarBlur()},r.prototype.render=function(){var e=this.props,r=e.onInputChange,n=e.onSearchBarFocus,o=e.onSearchBarBlur,i=e.placeholder,_=e.isFocused,u=e.isActive,h=e.highlightedRow,d=e.rawQuery;return a.createElement("form",{className:"search-bar__input",onSubmit:this._onSubmit},a.createElement("button",{"aria-label":l._("Search"),className:"search-bar__button",type:"submit"},a.createElement(s.IconGlobal,{name:"search-small"})),a.createElement(S,t.__assign({},this.props,{focusSearchInput:this.focusSearchBarTextInput})),a.createElement("input",{"aria-activedescendant":"search-dropdown-suggestion"+h,"aria-autocomplete":"list","aria-expanded":_&&u,"aria-label":l._("Search"),"aria-owns":"search-bar__suggestions",className:"search-bar__text-input",onChange:r,onFocus:n,onBlur:o,onKeyDown:this._onKeyDown,placeholder:i?i:l._("Search"),ref:this._setSearchBarTextInputRef,role:"combobox",value:d,tabIndex:c.LAYOUT_TAB_ORDER.SEARCH_BAR}))},r})(a.Component),S=(function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r._onMouseDownFocus=function(e){e.stopPropagation(),e.preventDefault(),r.props.focusSearchInput()},r._onMouseDownClose=function(e){e.stopPropagation(),e.preventDefault();var t=r.props.onSearchChipInteraction;t&&(t(!1),r.props.focusSearchInput())},r}return t.__extends(r,e),r.prototype.render=function(){return this.props.scopeChip&&h.isValidPathForChip(this.props.scopeChip)?a.createElement("ul",{className:"search_bar__chip_list"},this._renderChip()):null},r.prototype._renderChip=function(){var e=l._("This Folder"),r=this.props.isFocused;return a.createElement("li",{className:"search_bar__chip",title:e,onMouseDown:this._onMouseDownFocus},a.createElement(o.IconContent,{name:"folder-small",height:"17px",width:"17px"}),r?[a.createElement("span",{className:"search_bar__chip_text"},e),a.createElement("span",{className:"search_bar__chip_x",onMouseDown:this._onMouseDownClose})]:null)},r})(a.Component)}),define("modules/clean/search/search_helpers",["require","exports","external/sjcl","modules/clean/search/search_bar/data/store","modules/clean/search/search_bar/data/selectors","modules/clean/search/search_bar/api","modules/clean/react/browse/models","modules/clean/search/models","modules/core/i18n","modules/core/uri","modules/clean/browse_uri_interface","modules/core/cookies"],function(e,r,t,n,s,o,a,i,c,_,l,u){"use strict";function h(e){var r=e.user,t=e.searchPath,n=e.normalizedQuery,s=e.searchSessionId;return new _.URI({path:"/search/"+r.role,query:{path:t,query:n,qsid:s,search_token:S()}})}function d(e,r){return e instanceof i.SlimFileSearchResult?l.browse_uri_for_fq_path(r,e.fq_path).toString():e.url}function p(e){var r=e.searchBarApiClient,t=e.searchResult,_=e.user,l=e.onSuccess,u=e.onError;if(t instanceof i.SlimFileSearchResult){var h=s.searchResultForPath(n.getStoreForSearchBar().getState(),t.fq_path);h?l(h):r.fetchAdditionalFileMetadata({searchResults:[t],user:_}).then(function(e){if(e.length>0)l(e[0]);else if(u){var r=c._("There was a problem completing this request.");u(r)}}).catch(function(e){!u||e instanceof o.RequestAbortedError||u(e.message)})}else(t instanceof a.Paper||t instanceof a.PaperFolder)&&l(t)}function E(e){return 0===e.button&&!e.altKey&&!e.ctrlKey&&!e.metaKey}function S(){var e=t.codec.utf8String.toBits(u.Cookies.read("__Host-js_csrf")),r=t.codec.utf8String.toBits("search"),n=new t.misc.hmac(e);return t.codec.base64.fromBits(n.encrypt(r))}Object.defineProperty(r,"__esModule",{value:!0}),r.buildSearchURL=h,r.resultObjectToUrl=d,r.fetchFullSearchResult=p,r.shouldHandleClick=E,r.getSearchCsrfToken=S}),define("modules/clean/search/store_helpers",["require","exports"],function(e,r){"use strict";function t(e){return e.trim().replace(/\ +/g," ")}function n(e){return!t(e)}function s(e,r){return!(n(e)||!n(r))||e.length>=3&&1===r.length}function o(){for(var e="",r=0;r<32;r++){var t=Math.floor(10*Math.random());e+=String(t)}return e}Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=t,r.isBlank=n,r.shouldStartNewSearchSession=s,r.generateRandomId=o}),define("modules/clean/search/types",["require","exports"],function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SearchResultTypes={FILE:"FILE",PAPER:"PAPER",PAPER_FOLDER:"PAPER_FOLDER"};(function(e){e.WITH_ICON="WITH_ICON",e.WITHOUT_ICON="WITHOUT_ICON",e.OFF="OFF",e.CONTROL="CONTROL"})(r.SearchRecentHistoryVariants||(r.SearchRecentHistoryVariants={}));(function(e){e.CACHED="CACHED",e.UNCACHED="UNCACHED",e.OFF="OFF",e.CONTROL="CONTROL"})(r.HoverPreviewsVariants||(r.HoverPreviewsVariants={}));(function(e){e.RENDER="RENDER",e.CALCULATE_ONLY="CALCULATE_ONLY",e.OFF="OFF",e.CONTROL="CONTROL"})(r.DropdownThumbnailVariants||(r.DropdownThumbnailVariants={}));(function(e){e.ON="ON",e.OFF="OFF",e.CONTROL="CONTROL"})(r.ScopeFilterRightRailVariants||(r.ScopeFilterRightRailVariants={}));(function(e){e.SEARCH_ALL="SEARCH_ALL",e.SCOPE_CHIPS="SCOPE_CHIPS"})(r.SearchBarDropdownHeaderItemType||(r.SearchBarDropdownHeaderItemType={}))}),define("modules/clean/sharing/access_level",["require","exports","external/lodash"],function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(function(e){e[e.ACCESS_NO_ACCESS=0]="ACCESS_NO_ACCESS",e[e.ACCESS_READER_NO_COMMENT=-10]="ACCESS_READER_NO_COMMENT",e[e.ACCESS_READER=1]="ACCESS_READER",e[e.ACCESS_WRITER=2]="ACCESS_WRITER",e[e.ACCESS_OWNER=3]="ACCESS_OWNER"})(r.NameSpaceAccess||(r.NameSpaceAccess={})),r.ACCESS_LEVEL={OWNER:"owner",WRITER:"writer",READER:"reader",READER_NO_COMMENT:"reader_no_comment"},r.ACCESS_VALUES=t.values(r.ACCESS_LEVEL);var n={reader_no_comment:-10,reader:1,writer:2,owner:3};r.isLowerAccess=function(e,t){var s=Object.keys(n);return e!==t&&s.indexOf(e)!==-1&&s.indexOf(t)!==-1&&r.getMaxAccess([e,t])===e},r.getMaxAccess=function(e){if(0===e.length)throw Error("Argument accessLevels are not valid.");for(var r=e[0],t=n[r],s=0;s<e.length;s++){var o=e[s],a=n[o];a>t&&(t=a,r=o)}return r}}),define("modules/clean/web_user_action_events",["require","exports"],function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(function(e){e.ADD_COMMENT="add_comment",e.ARCHIVE="archive",e.ATTACHMENT_ADD_SUCCESS="attachment_add_success",e.ATTACHMENT_CLICKED="attachment_clicked",e.ATTACHMENT_REMOVED="attachment_removed",e.CALENDAR_TAB_CLICKED="calendar_tab_clicked",e.CLICK_ADD_ATTACHMENT="click_add_attachment",e.CLICK_CONVERT_INDIVIDUAL_ACCOUNT="click_convert_individual_account",e.CLICK_LEARN_MORE_ACCOUNT_CONVERSION="click_learn_more_account_conversion",e.CLICK_PATH_LINK="click_path_link",e.CLICK_REVIEW_SUMMARY_DELETE_USER="click_review_summary_delete_user",e.CONTEXT_MENU="context_menu",e.COPY="copy",e.CREATE_FOLDER="create_folder",e.DISBAND_TEAM_KEEP="disband_team_keep",e.DISBAND_TEAM_LEARN_MORE="disband_team_learn_more",e.DISBAND_TEAM_VIEW="disband_team_view",e.DELETE="delete",e.DOWNLOAD="download",e.EVENTS="events",e.FILE_VIEW="file_view",e.FOLDER_OPEN="folder_open",e.LEAVE_TEAM_CANCEL="leave_team_cancel",e.LEAVE_TEAM_LEARN_MORE="leave_team_learn_more",e.LEAVE_TEAM_VIEW="leave_team_view",e.LINK_GOOGLE_CAL_CLICKED="link_google_cal_clicked",e.LINK_GOOGLE_CAL_SUCCESS="link_google_cal_success",e.MOVE="move",e.OPEN_ADD_TO_COLLECTION_MODAL="open_add_to_collection_modal",e.OPEN_CALENDAR_FLYOUT="open_calendar_flyout",e.OPEN_COPY_MODAL="open_copy_modal",e.OPEN_DELETE_USER_MODAL="open_delete_user_modal",e.OPEN_MOVE_MODAL="open_move_modal",e.OPEN_ROW="open_row",e.PAPER_CONTEXT_MENU="paper_context_menu",e.PAPER_OPEN="paper_open",e.PERMANENT_DELETE="permanent_delete",e.RENAME="rename",e.RESTORE="restore",e.SELECT_ROW="select_row",e.SHARE="share",e.SHOW_IN_FOLDER="show_in_folder",e.SORT_RECORDS="sort_records",e.STAR="star",e.REMOVE_STAR="remove_star",e.SWITCH_ACCOUNT="switch_account",e.SWITCH_VIEW_TYPE="switch_view_type",e.TOGGLE_DELETED_FILES="toggle_deleted_files",e.UNMOUNTED_VIEW="unmounted_view",e.UPLOAD_FILE="upload_file",e.VERSIONS="versions",e.VIEW_SHARE_MODEL="view_share_model",e.OPEN_DESKTOP="open_via_unity"})(r.WebUserActionLogEvent||(r.WebUserActionLogEvent={}))}),define("modules/clean/web_user_action_logger",["require","exports","modules/clean/ajax"],function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_ERRORS=3;var n=(function(){function e(){this.errorCount=0,this.lastError=Date.now(),this.shouldReport=!0}return e.prototype.log=function(e,n,s){var o=this;return this.shouldReport&&(this.errorCount<r.MAX_ERRORS||Date.now()-this.lastError>6e5)?new Promise(function(a,i){t.SilentBackgroundRequest({url:"/log/web_user_action",data:{_subject_uid:e,event_type:n,extra_params:JSON.stringify(s)},error:function(e){429===e.status?o.errorCount=r.MAX_ERRORS:o.errorCount++,o.lastError=Date.now(),i(e)},success:function(e){try{var r=JSON.parse(e);r&&!r.continue_sending&&(o.shouldReport=!1),o.errorCount=0,a(e)}catch(e){throw o.errorCount++,o.lastError=Date.now(),i(e),e}}})}):Promise.resolve({})},e})();r.WebUserActionLogClass=n,r.WebUserActionLog=new n});
//# sourceMappingURL=pkg-embedded_app.min.js-vflGDjNNi.map