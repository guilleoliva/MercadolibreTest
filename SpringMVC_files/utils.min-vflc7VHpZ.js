define(["require","exports","modules/clean/ajax","modules/core/browser","modules/clean/sharing/api/client","modules/constants/file_viewer","modules/clean/previews/util","modules/clean/viewer","modules/clean/react/paper/paper_log","modules/core/i18n"],function(e,n,t,r,o,i,a,s,d,l){"use strict";function u(e){if(p(e)){var n=i.EMBED_TO_PAPER_VARIANT;if("docx"===a.get_extension(e.file)&&"OFF"===n)return g.Dropdown;if("BUTTON"===n)return g.Button;if("DROPDOWN"===n)return g.Dropdown;if("ELLIPSIS"===n)return g.Ellipsis;if("CONTROL"===n)return g.Control}return g.Off}function p(e){var n=e.file,t=e.user,o=e.sharedLink;if(!n)return!1;var d=a.get_extension(n);return!!d&&(!!o&&"docx"===d||!o&&P.includes(d))&&!s.Viewer.get_viewer().is_assume_user_session&&!r.is_mobile_or_tablet()&&r.is_supported_paper_browser()&&n.bytes<20971520&&h.includes(i.OPEN_IN_PAPER_VARIANT)&&(!t&&!!o||!!t&&!t.is_paper_disabled)}function _(e){var n=a.get_extension(e),t=l._("Copy to Paper");return"docx"!==n&&(t=l._("Add to Paper")),t}function c(e){return"docx"===a.get_extension(e)?l._("Bring this doc to life"):l._("Build on ideas")}function f(e){return"docx"===a.get_extension(e)?l._("Copy to Paper and make changes with your team."):l._("Add this file to a Paper doc to take notes and get organized.")}function x(e,n,o){t.WebRequest({url:"/paper/sign_request_data",data:{path:e.file_id,sharedLink:n,cont_url:o},success:function(e){r.redirect(e)}})}function A(e){var n=e.sharedLink?e.sharedLink:"",t=e.file,r=e.user,i=e.sharedLink?"shared_file_actions":"mounted_file_actions",s=a.get_extension(t);if(d.paperLog(d.PaperEventTypes.CTA_CLICK,{source:i,cta:"open_in_paper_button",extension:s}),"docx"===s)x(t,n,"/create-doc-from-dropbox-file");else if(!n&&r){var l=new o.FileShareApiClient({userId:r.id});l.sharedLinkInfo({fileIdOrPath:t.file_id}).then(function(e){e?x(t,e.url,"/dropbox-file-embed"):l.createSharedLink({fileIdOrPath:t.file_id}).then(function(e){x(t,e.url,"/dropbox-file-embed")})})}else x(t,n,"/dropbox-file-embed")}Object.defineProperty(n,"__esModule",{value:!0});var g,h=["VARIANT_A","VARIANT_B1","VARIANT_B2","VARIANT_B3","VARIANT_B4","ON"],P=["docx","doc","jpg","jpeg","png","pdf","xls","xlsx","mp4","mov","pptx","ppt","zip","rar","mp3"];(function(e){e[e.Off=1]="Off",e[e.Control=2]="Control",e[e.Button=3]="Button",e[e.Dropdown=4]="Dropdown",e[e.Ellipsis=5]="Ellipsis"})(g=n.OpenInPaperButtonVariant||(n.OpenInPaperButtonVariant={})),n.getOpenInPaperButtonVariant=u,n.shouldShowOpenInPaper=p,n.getCTAText=_,n.getCalloutTitle=c,n.getCalloutMessage=f,n.createPaperAccountAndRedirect=x,n.openFileInPaper=A});
//# sourceMappingURL=utils.min.js-vflDCfeqi.map